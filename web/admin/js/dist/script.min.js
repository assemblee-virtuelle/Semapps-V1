"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();window.log=function(e){console.log(e)};var CartoAdmin=function(){function e(){var t=this;_classCallCheck(this,e),$(function(){t.init()})}return _createClass(e,[{key:"init",value:function(){var e=this;this.$loadingPageSpin=$("#loadingPageSpin"),window.lgvAdmin=this,this.$modalConfirm=$("#modalConfirm"),this.$modalConfirmBody=this.$modalConfirm.find(".modal-body:first"),this.$modalConfirmValidate=this.$modalConfirm.find(".btn-primary:first"),$("#register-form").steps({headerTag:"h3",bodyTag:"section",transitionEffect:"slideLeft",enableFinishButton:!1,labels:{next:"Suivant",previous:"Précédent"}}),$('.steps ul[role="tablist"]').hide(),$("form").each(function(t,r){var n=$(r);n.find('div.formEditAvatar input[type="file"]').change(function(){e.pageLoadingStart(),n.submit()})}),new CartoAdminPageTeam(this),new CartoAdminPageProfile(this),new CartoAdminPageOrga(this),new CartoAdminPageComponent(this),new CartoAdminPageUser(this),new CartoAdminPageComponentAddress(this)}},{key:"modalConfirm",value:function(e,t){var r=this;this.$modalConfirmBody.html(e),this.$modalConfirm.modal("show"),this.$modalConfirmValidate.one("click",function(){r.$modalConfirm.modal("hide"),t()})}},{key:"pageLoadingStart",value:function(){this.$loadingPageSpin.removeClass("fadeOut").addClass("fadeIn")}},{key:"pageLoadingStop",value:function(){this.$loadingPageSpin.removeClass("fadeIn").addClass("fadeOut")}}]),e}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),CartoAdminPage=function(){function e(t){_classCallCheck(this,e),this.admin=t,this.init()}return _createClass(e,[{key:"init",value:function(){}},{key:"getParameterByName",value:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var r=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=r.exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}}]),e}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},CartoAdminPageTeam=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),$(".team-user-delete").click(function(t){t.preventDefault();var r=$(t.currentTarget).attr("rel");e.admin.modalConfirm("Êtes-vous sûr de vouloir supprimer ce compte ? Toutes les informations du profil seront perdues, et le membre n'aura plus accès au site.",function(){window.location.replace("/administration/user/"+r+"/delete")})}),$(document.getElementById("teamManager")).find("tr").each(function(){var e=$(this),t=e.attr("rel");e.find("select[name=accessLevel]").change(function(){var e=$(this).val();window.location.replace("/administration/access/"+t+"/change/"+e)})})}}]),t}(CartoAdminPage),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},CartoAdminPageUser=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),$(".user-send-email").click(function(e){e.preventDefault();var t=$(e.currentTarget).attr("rel"),r=$(e.currentTarget).attr("nameRoute");window.location.replace("/administration/user/"+t+"/send/"+r)})}}]),t}(CartoAdminPage),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},CartoAdminPageProfile=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this);var e=$(".profileEditToSwitch");$(".profileEditSwitch").click(function(){e.toggle()}),this.getParameterByName("edit")&&e.toggle()}}]),t}(CartoAdminPage),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},CartoAdminPageOrga=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),$(".orga-delete").click(function(t){t.preventDefault();var r=$(t.currentTarget).attr("rel");e.admin.modalConfirm("Êtes-vous sûr de vouloir supprimer cette organisation ? Tous les membres associés vont être supprimés.",function(){window.location.replace("/administration/organisation/"+r+"/delete")})});var r=$("#organisationPictureForm");r.find('input[type="file"]').change(function(){lgvAdmin.pageLoadingStart(),r.submit()}),$(".lookupAdressse input").autocomplete({source:function(e,t){$.ajax({url:"http://api-adresse.data.gouv.fr/search/",data:"q="+$(".lookupAdressse input").val(),success:function(e){t($.map(e.features,function(e){return log(e.properties.label),e.properties.label}))}})}})}}]),t}(CartoAdminPage),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},CartoAdminPageComponent=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),$(".component-delete").click(function(t){t.preventDefault();var r=$(t.currentTarget).attr("href"),n=$(t.currentTarget).attr("name");e.admin.modalConfirm("Êtes-vous sûr de vouloir supprimer ce "+n+" ? Toutes les informations seront perdues. ",function(){window.location.replace(r)})}),$(".component-new-picture").change(function(e){e.preventDefault(),log($(e.currentTarget).val()),$("img[id='componentPicture']").attr("src",$(e.currentTarget).val())}),$("a[id='componentPicture']").mouseover(function(e){$("#componentImage").attr("class","form-group col-xs-12 has-success")}).mouseout(function(e){$("#componentImage").attr("class","form-group col-xs-12")})}}]),t}(CartoAdminPage),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(n)},CartoAdminPageComponentAddress=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.currentText="",e}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this),$(".address-elem").change(function(t){t.preventDefault();var r=$(t.currentTarget).find(".tag").first().text();if(e.currentText!==r){e.currentText=r;var n=$(t.currentTarget).parent().find("#address_latitude"),o=$(t.currentTarget).parent().find("#address_longitude");""!==e.currentText.replace(/\s/g,"")?$.ajax({url:"https://api-adresse.data.gouv.fr/search/",data:{q:e.currentText},complete:function(e){var t=e.responseJSON.features;if(t.length>0){var r=t[0];log(r),log(r.geometry.coordinates[0]),log(r.geometry.coordinates[1]);var a=r.geometry.coordinates[0],i=r.geometry.coordinates[1];n.attr("value",i),o.attr("value",a)}}}):(n.attr("value",""),o.attr("value",""))}})}}]),t}(CartoAdminPage),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),VirtualAssemblyFieldUri=function(){function e(t){var r=this;_classCallCheck(this,e),this.value={},this.$=$(t),this.$selector=this.$.find(".tags-selector"),this.$value=this.$.find(".tags-value"),this.$tags=this.$.find(".tags"),this.urlLookup=this.$.attr("data-sf-lookup"),this.urlLabel=this.$.attr("data-sf-label"),this.rdfType=this.$.attr("data-sf-rdfType"),this.$selector.select2({width:"100%",placeholder:"Ajoutez un terme ici",ajax:{url:this.urlLookup,dataType:"json",delay:250,data:this.lookupParams.bind(this),processResults:this.lookupProcessResults.bind(this)},cache:!0}),this.$selector.on("select2:select",function(e){r.setValue(r.$selector.val(),r.selectValues[r.$selector.val()])});var n=this.$value.val();n=n&&JSON.parse(n);var o=function(e,t){r.setValue(t,e)};Array.isArray(n)&&$.each(n,function(e,t){t&&r.getUriLabel(t,o)})}return _createClass(e,[{key:"lookupParams",value:function(e){return{rdfType:this.rdfType,QueryString:e.term,MaxHits:15}}},{key:"lookupProcessResults",value:function(e){var t=[];return this.selectValues=e,$.each(this.selectValues,function(e,r){t.push({id:e,text:r})}),{results:t}}},{key:"setValue",value:function(e,t){this.value[e]=t,this.fillValues()}},{key:"fillValues",value:function(){var e=this;this.$value.val(JSON.stringify(this.value)),this.$tags.empty(),$.each(this.value,function(t,r){if(!1!==r){var n=$('<span class="tag">'+r+' <a href="#" class="remove-tag glyphicon glyphicon-remove"></a></span>');n.find("a.remove-tag").click(function(r){r.preventDefault(),delete e.value[t],e.fillValues()}),e.$tags.append(n)}}),this.$tags.append('<div class="clearfix"></div>'),this.$tags.toggle(!!Object.keys(this.value).length),this.$selector.val(null).trigger("change")}},{key:"getUriLabel",value:function(e,t){var r=this;e&&$.ajax({url:this.urlLabel,data:{uri:e},complete:function(t){r.setValue(e,t.responseJSON.label)}})}}]),e}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),VirtualAssemblyFieldDbPedia=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"lookupProcessResults",value:function(e){var t=[];this.selectValues={};var r=!0,n=!1,o=void 0;try{for(var a,i=e.results[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;t.push({id:l.uri,text:l.label}),this.selectValues[l.uri]=l.label}}catch(e){n=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}return{results:t}}},{key:"getUriLabel",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"fr",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"http://www.w3.org/2000/01/rdf-schema#label",o=function(e,t){var r=!0,n=!1,o=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;if(l.lang===t)return l.value}}catch(e){n=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}};$.ajax({headers:{Accept:"application/json","Accept-Language":"fr"},url:e,complete:function(a){if(a.responseJSON){var i=a.responseJSON[e][n],l=o(i,r)||o(i,"en")||i[0].value;t(l,e)}}})}}]),t}(VirtualAssemblyFieldUri),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),VirtualAssemblyFieldAdresse=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"lookupProcessResults",value:function(e){var t=[];this.selectValues={};var r=!0,n=!1,o=void 0;try{for(var a,i=e.features[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;t.push({id:l.properties.label,text:l.properties.label}),this.selectValues[l.properties.label]=l.properties.label}}catch(e){n=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw o}}return{results:t}}},{key:"getUriLabel",value:function(e,t){var r=this;e&&$.ajax({url:"https://api-adresse.data.gouv.fr/search/",data:{q:e},complete:function(t){var n=t.responseJSON.features;if(n.length>0){var o=n[0];r.setValue(e,o.properties.label)}}})}},{key:"lookupParams",value:function(e){return{q:e.term,MaxHits:15}}}]),t}(VirtualAssemblyFieldUri),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),VirtualAssemblyFieldMultiple=function(){function e(t){var r=this;_classCallCheck(this,e),this.value={},this.$=$(t),this.$selector=this.$.find(".tags-selector"),this.$value=this.$.find(".tags-value"),this.$tags=this.$.find(".tags"),this.urlLookup=this.$.attr("data-sf-lookup"),this.urlLabel=this.$.attr("data-sf-label"),this.rdfType=this.$.attr("data-sf-rdfType"),this.$selector.select2({width:"100%",placeholder:"Ajoutez un terme ici",tags:!0,createTag:this.lookupProcessResults.bind(this)}),this.$selector.on("select2:select",function(e){log("yolo"),r.setValue(r.$selector.val(),r.selectValues[r.$selector.val()])});var n=this.$value.val();n=n&&JSON.parse(n);var o=function(e,t){r.setValue(t,e)};Array.isArray(n)&&$.each(n,function(e,t){t&&r.getUriLabel(t,o)})}return _createClass(e,[{key:"lookupProcessResults",value:function(e){var t=$.trim(e.term);return this.selectValues={},this.selectValues[t]=t,{id:t,text:t,newTag:!0}}},{key:"getUriLabel",value:function(e,t){this.setValue(e,e)}},{key:"lookupParams",value:function(e){return{q:e.term,MaxHits:15}}}]),_createClass(e,[{key:"setValue",value:function(e,t){log(e),log(t),this.value[e]=t,this.fillValues()}},{key:"fillValues",value:function(){var e=this;this.$value.val(JSON.stringify(this.value)),this.$tags.empty(),$.each(this.value,function(t,r){if(!1!==r){var n=$('<span class="tag">'+r+' <a href="#" class="remove-tag glyphicon glyphicon-remove"></a></span>');n.find("a.remove-tag").click(function(r){r.preventDefault(),delete e.value[t],e.fillValues()}),e.$tags.append(n)}}),this.$tags.append('<div class="clearfix"></div>'),this.$tags.toggle(!!Object.keys(this.value).length),this.$selector.val(null).trigger("change")}}]),e}();$(function(){var e=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};$(".select2-tags").each(function(t,r){new(window["VirtualAssemblyField"+e($(r).attr("data-sf-type"))])(r)})}),new CartoAdmin;
//# sourceMappingURL=script.min.js.map
