{"version":3,"sources":["web/admin/js/src/class/lgvAdmin.js","web/admin/js/src/class/lgvAdminPage.js","web/admin/js/src/class/lgvAdminPageTeam.js","web/admin/js/src/class/lgvAdminPageProfile.js","web/admin/js/src/class/lgvAdminPageOrga.js","web/admin/js/src/main.js"],"names":["LgvAdmin","_this","this","_classCallCheck","$","init","$loadingPageSpin","window","lgvAdmin","$modalConfirm","$modalConfirmBody","find","$modalConfirmValidate","LgvAdminPageTeam","LgvAdminPageProfile","LgvAdminPageOrga","message","callback","_this2","html","modal","one","removeClass","addClass","LgvAdminPage","admin","cloneWidget","on","parent","first","name","url","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","click","e","preventDefault","userId","currentTarget","attr","modalConfirm","document","getElementById","each","$this","change","roles","val","$toggle","toggle","getParameterByName","$form","pageLoadingStart","submit"],"mappings":"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","file":"script.min.js","sourcesContent":["class LgvAdmin {\n  constructor() {\n    // Wait document loaded.\n    $(()=> {\n      this.init();\n    });\n  }\n\n  init() {\n    this.$loadingPageSpin = $('#loadingPageSpin');\n    // Save globally.\n    window.lgvAdmin = this;\n\n    // Define reused variables.\n    this.$modalConfirm = $('#modalConfirm');\n    this.$modalConfirmBody = this.$modalConfirm.find('.modal-body:first');\n    this.$modalConfirmValidate = this.$modalConfirm.find('.btn-primary:first');\n\n    new LgvAdminPageTeam(this);\n    new LgvAdminPageProfile(this);\n    new LgvAdminPageOrga(this);\n  }\n\n  modalConfirm(message, callback) {\n    this.$modalConfirmBody.html(message);\n    this.$modalConfirm.modal('show');\n    this.$modalConfirmValidate.one('click', () => {\n      this.$modalConfirm.modal('hide');\n      callback();\n    });\n  }\n\n  pageLoadingStart() {\n    this.$loadingPageSpin\n      .removeClass('fadeOut')\n      .addClass('fadeIn');\n  }\n\n  pageLoadingStop() {\n    this.$loadingPageSpin\n      .removeClass('fadeIn')\n      .addClass('fadeOut');\n  }\n}\n\n","class LgvAdminPage {\n  constructor(admin) {\n    this.admin = admin;\n\n    // Need wikipedia.js and formInteraction.js\n    if (window.cloneWidget) {\n      // Manage widgets duplication.\n      $(\".form-group\").on('click', '.add-widget', function () {\n        cloneWidget($(this)\n          .parent()\n          .parent()\n          .find('.sf-value-block')\n          .first()\n          .find('.ref')\n          .first())\n      });\n    }\n  }\n\n  getParameterByName(name, url) {\n    if (!url) {\n      url = window.location.href;\n    }\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n      results = regex.exec(url);\n    if (!results) return null;\n    if (!results[2]) return '';\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n  }\n}\n","class LgvAdminPageTeam extends LgvAdminPage {\r\n  constructor(admin) {\r\n    super(admin);\r\n\r\n    // On user profile, remove user button.\r\n    $('.team-user-delete').click((e) => {\r\n      // Disable default click behavior.\r\n      e.preventDefault();\r\n      let userId = $(e.currentTarget).attr('rel');\r\n      // Use custom modal for message.\r\n      this.admin.modalConfirm('Êtes-vous sûr de vouloir supprimer ce compte ? ' +\r\n        'Toutes les informations du profil seront perdues, ' +\r\n        'et le membre n\\'aura plus accès au site.', () => {\r\n        window.location.replace('/mon-compte/user/delete/' + userId);\r\n      });\r\n    });\r\n\r\n    $(document.getElementById('teamManager')).find('tr').each(function () {\r\n      let $this = $(this);\r\n      let userId = $this.attr('rel');\r\n\r\n      // Manage select changes.\r\n      $this.find('select[name=accessLevel]').change(function () {\r\n          let roles = $(this).val();\r\n          window.location.replace('/mon-compte/access/change/' + userId + '/' + roles);\r\n      });\r\n    });\r\n  }\r\n}\r\n","class LgvAdminPageProfile extends LgvAdminPage {\n  constructor(admin) {\n    super(admin);\n\n    // Click on edit profile button.\n    let $toggle = $('.profileEditToSwitch');\n    $('.profileEditSwitch').click(() => {\n      $toggle.toggle();\n    });\n\n    // Display form if asked.\n    if (this.getParameterByName('edit')) {\n      $toggle.toggle();\n    }\n\n    // Change image field.\n    let $form = $('#profilePictureForm');\n    $form.find('input[type=\"file\"]').change(()=> {\n      // Display a nice spinner.\n      lgvAdmin.pageLoadingStart();\n      // Send form will reload the page.\n      $form.submit();\n    });\n  }\n}\n","class LgvAdminPageOrga extends LgvAdminPage {\n  constructor(admin) {\n    super(admin);\n\n    // On user profile, remove user button.\n    $('.orga-delete').click((e) => {\n      // Disable default click behavior.\n      e.preventDefault();\n      var userId = $(e.currentTarget).attr('rel');\n      // Use custom modal for message.\n      this.admin.modalConfirm('Êtes-vous sûr de vouloir supprimer cette organisation ? Tous les membres associés vont être supprimés.', () => {\n        window.location.replace('/mon-compte/orga/delete/' + userId);\n      });\n    });\n  }\n}\n","// It knows what to do.\nnew LgvAdmin();\n\n"]}