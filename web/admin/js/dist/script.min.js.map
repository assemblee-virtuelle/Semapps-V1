{"version":3,"sources":["web/admin/js/src/class/cartoAdmin.js","web/admin/js/src/class/cartoAdminPage.js","web/admin/js/src/class/cartoAdminPageTeam.js","web/admin/js/src/class/cartoAdminPageUser.js","web/admin/js/src/class/cartoAdminPageProfile.js","web/admin/js/src/class/cartoAdminPageOrga.js","web/admin/js/src/class/cartoAdminPageComponent.js","web/admin/js/src/class/cartoAdminPageComponentAddress.js","vendor/VirtualAssembly/SemanticFormsBundle/VirtualAssembly/SemanticFormsBundle/Resources/js/field.uri.js","vendor/VirtualAssembly/SemanticFormsBundle/VirtualAssembly/SemanticFormsBundle/Resources/js/field.dbPedia.js","vendor/VirtualAssembly/SemanticFormsBundle/VirtualAssembly/SemanticFormsBundle/Resources/js/field.Adresse.js","vendor/VirtualAssembly/SemanticFormsBundle/VirtualAssembly/SemanticFormsBundle/Resources/js/field.Multiple.js","vendor/VirtualAssembly/SemanticFormsBundle/VirtualAssembly/SemanticFormsBundle/Resources/js/semanticForms.js","web/admin/js/src/main.js"],"names":["window","log","m","console","CartoAdmin","_this","this","_classCallCheck","$","init","_this2","$loadingPageSpin","lgvAdmin","$modalConfirm","$modalConfirmBody","find","$modalConfirmValidate","steps","headerTag","bodyTag","transitionEffect","enableFinishButton","labels","next","previous","hide","each","index","form","$form","change","pageLoadingStart","submit","CartoAdminPageTeam","CartoAdminPageProfile","CartoAdminPageOrga","CartoAdminPageComponent","CartoAdminPageUser","CartoAdminPageComponentAddress","message","callback","_this3","html","modal","one","removeClass","addClass","CartoAdminPage","admin","name","url","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","_get","prototype","__proto__","Object","getPrototypeOf","call","click","e","preventDefault","userId","currentTarget","attr","modalConfirm","document","getElementById","$this","roles","val","nameRoute","$toggle","toggle","getParameterByName","autocomplete","source","requete","reponse","ajax","data","success","donnee","map","features","objet","properties","label","route","nameComponent","mouseover","mouseout","_possibleConstructorReturn","currentText","textelem","first","text","address_latitude","parent","address_longitude","q","complete","r","array","responseJSON","length","result","geometry","coordinates","longitude","latitude","VirtualAssemblyFieldUri","dom","value","$selector","$value","$tags","urlLookup","urlLabel","rdfType","select2","width","placeholder","dataType","delay","lookupParams","bind","processResults","lookupProcessResults","cache","on","setValue","selectValues","startupValue","JSON","parse","getLabelCallback","uri","Array","isArray","key","getUriLabel","params","QueryString","term","MaxHits","items","title","push","id","fillValues","stringify","empty","$item","append","keys","trigger","VirtualAssemblyFieldDbPedia","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","err","return","lang","arguments","propertyUri","callbackLanguage","values","acceptedLang","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","headers","Accept","Accept-Language","VirtualAssemblyFieldAdresse","elem","VirtualAssemblyFieldMultiple","tags","createTag","trim","newTag","ucFirst","charAt","toUpperCase","slice","item"],"mappings":"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","file":"script.min.js","sourcesContent":["window.log = (m) => {\r\n  \"use strict\";\r\n  console.log(m);\r\n};\r\n\r\nclass CartoAdmin {\r\n  constructor() {\r\n    // Wait document loaded.\r\n    $(()=> {\r\n      this.init();\r\n    });\r\n  }\r\n\r\n  init() {\r\n    this.$loadingPageSpin = $('#loadingPageSpin');\r\n    // Save globally.\r\n    window.lgvAdmin = this;\r\n\r\n    // Define reused variables.\r\n    this.$modalConfirm = $('#modalConfirm');\r\n    this.$modalConfirmBody = this.$modalConfirm.find('.modal-body:first');\r\n    this.$modalConfirmValidate = this.$modalConfirm.find('.btn-primary:first');\r\n    // For register\r\n    $(\"#register-form\").steps({\r\n        headerTag: \"h3\",\r\n        bodyTag: \"section\",\r\n        transitionEffect: \"slideLeft\",\r\n        enableFinishButton: false,\r\n        labels: {\r\n            next: \"Suivant\",\r\n            previous: \"Précédent\",\r\n        }\r\n    });\r\n    $('.steps ul[role=\"tablist\"]').hide();\r\n\r\n    // Change image field.\r\n    $('form').each((index, form) => {\r\n      let $form = $(form);\r\n      $form.find('div.formEditAvatar input[type=\"file\"]').change(() => {\r\n        // Display a nice spinner.\r\n        this.pageLoadingStart();\r\n        // Send form will reload the page.\r\n        $form.submit();\r\n      });\r\n    });\r\n\r\n    new CartoAdminPageTeam(this);\r\n    new CartoAdminPageProfile(this);\r\n    new CartoAdminPageOrga(this);\r\n    new CartoAdminPageComponent(this);\r\n    new CartoAdminPageUser(this);\r\n    new CartoAdminPageComponentAddress(this);\r\n  }\r\n\r\n  modalConfirm(message, callback) {\r\n    this.$modalConfirmBody.html(message);\r\n    this.$modalConfirm.modal('show');\r\n    this.$modalConfirmValidate.one('click', () => {\r\n      this.$modalConfirm.modal('hide');\r\n      callback();\r\n    });\r\n  }\r\n\r\n  pageLoadingStart() {\r\n    this.$loadingPageSpin\r\n      .removeClass('fadeOut')\r\n      .addClass('fadeIn');\r\n  }\r\n\r\n  pageLoadingStop() {\r\n    this.$loadingPageSpin\r\n      .removeClass('fadeIn')\r\n      .addClass('fadeOut');\r\n  }\r\n}\r\n","class CartoAdminPage {\r\n  constructor(admin) {\r\n    this.admin = admin;\r\n    this.init();\r\n  }\r\n\r\n  init() {}\r\n\r\n  getParameterByName(name, url) {\r\n    if (!url) {\r\n      url = window.location.href;\r\n    }\r\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\r\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\r\n      results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\r\n  }\r\n}\r\n","class CartoAdminPageTeam extends CartoAdminPage {\r\n  init() {\r\n    super.init();\r\n\r\n    // On user profile, remove user button.\r\n    $('.team-user-delete').click((e) => {\r\n      // Disable default click behavior.\r\n      e.preventDefault();\r\n      let userId = $(e.currentTarget).attr('rel');\r\n      // Use custom modal for message.\r\n      this.admin.modalConfirm('Êtes-vous sûr de vouloir supprimer ce compte ? ' +\r\n        'Toutes les informations du profil seront perdues, ' +\r\n        'et le membre n\\'aura plus accès au site.', () => {\r\n        window.location.replace('/mon-compte/user/delete/' + userId);\r\n      });\r\n    });\r\n\r\n    $(document.getElementById('teamManager')).find('tr').each(function () {\r\n      let $this = $(this);\r\n      let userId = $this.attr('rel');\r\n\r\n      // Manage select changes.\r\n      $this.find('select[name=accessLevel]').change(function () {\r\n          let roles = $(this).val();\r\n          window.location.replace('/mon-compte/access/change/' + userId + '/' + roles);\r\n      });\r\n    });\r\n  }\r\n}\r\n","class CartoAdminPageUser extends CartoAdminPage {\r\n  init() {\r\n    super.init();\r\n\r\n    // On user profile, remove user button.\r\n    $('.user-send-email').click((e) => {\r\n      // Disable default click behavior.\r\n      e.preventDefault();\r\n      let userId = $(e.currentTarget).attr('rel');\r\n      let nameRoute = $(e.currentTarget).attr('nameRoute');\r\n      // Use custom modal for message.\r\n       window.location.replace('/users/send/' + userId +'/'+nameRoute);\r\n    });\r\n\r\n\r\n  }\r\n}\r\n","class CartoAdminPageProfile extends CartoAdminPage {\r\n  init() {\r\n    super.init();\r\n\r\n    // Click on edit profile button.\r\n    let $toggle = $('.profileEditToSwitch');\r\n    $('.profileEditSwitch').click(() => {\r\n      $toggle.toggle();\r\n    });\r\n\r\n    // Display form if asked.\r\n    if (this.getParameterByName('edit')) {\r\n      $toggle.toggle();\r\n    }\r\n  }\r\n}\r\n","class CartoAdminPageOrga extends CartoAdminPage {\r\n  init() {\r\n    super.init();\r\n\r\n    // On user profile, remove user button.\r\n    $('.orga-delete').click((e) => {\r\n      // Disable default click behavior.\r\n      e.preventDefault();\r\n      var userId = $(e.currentTarget).attr('rel');\r\n      // Use custom modal for message.\r\n      this.admin.modalConfirm('Êtes-vous sûr de vouloir supprimer cette organisation ? Tous les membres associés vont être supprimés.', () => {\r\n        window.location.replace('/mon-compte/orga/delete/' + userId);\r\n      });\r\n    });\r\n\r\n    // Change image field.\r\n    let $form = $('#organisationPictureForm');\r\n    $form.find('input[type=\"file\"]').change(()=> {\r\n        // Display a nice spinner.\r\n        lgvAdmin.pageLoadingStart();\r\n        // Send form will reload the page.\r\n        $form.submit();\r\n    });\r\n      $('.lookupAdressse input').autocomplete({\r\n          source : function(requete, reponse){ // les deux arguments représentent les données nécessaires au plugin\r\n\r\n              $.ajax({\r\n\r\n                  url : 'http://api-adresse.data.gouv.fr/search/', // on appelle le script JSON\r\n                  data: 'q=' + $('.lookupAdressse input').val(),\r\n\r\n                  //dataType : 'json', // on spécifie bien que le type de données est en JSON\r\n\r\n                  success : function(donnee){\r\n                      reponse($.map(donnee.features, function(objet){\r\n                          log(objet.properties.label)\r\n                          return objet.properties.label; // on retourne cette forme de suggestion\r\n\r\n                      }));\r\n\r\n                  },\r\n              });\r\n\r\n          }\r\n      });\r\n  }\r\n}\r\n","class CartoAdminPageComponent extends CartoAdminPage {\r\n  init() {\r\n    super.init();\r\n\r\n    // On user profile, remove user button.\r\n    $('.component-delete').click((e) => {\r\n      // Disable default click behavior.\r\n      e.preventDefault();\r\n      let route = $(e.currentTarget).attr('href');\r\n      let nameComponent = $(e.currentTarget).attr('name');\r\n      // Use custom modal for message.\r\n      this.admin.modalConfirm('Êtes-vous sûr de vouloir supprimer ce '+nameComponent+' ? ' +\r\n        'Toutes les informations seront perdues. ', () => {\r\n        window.location.replace(route);\r\n      });\r\n    });\r\n    $('.component-new-picture').change((e) => {\r\n      e.preventDefault();\r\n      log($(e.currentTarget).val());\r\n      $(\"img[id='componentPicture']\").attr('src',$(e.currentTarget).val());\r\n    });\r\n      $(\"a[id='componentPicture']\").mouseover((e) => {\r\n          $('#componentImage').attr('class', 'form-group col-xs-12 has-success');\r\n      })\r\n      .mouseout((e) => {\r\n          $('#componentImage').attr('class', 'form-group col-xs-12');\r\n      })\r\n  }\r\n}\r\n","class CartoAdminPageComponentAddress extends CartoAdminPage {\r\n\r\n    constructor() {\r\n        super();\r\n        this.currentText =\"\";\r\n    }\r\n    init() {\r\n\r\n        super.init();\r\n        // On user profile, remove user button.\r\n        $('.address-elem').change((e) => {\r\n            // Disable default click behavior.\r\n            e.preventDefault();\r\n            let textelem = $(e.currentTarget).find('.tag').first().text();\r\n            if(this.currentText !== textelem){\r\n                this.currentText = textelem;\r\n                let address_latitude= $(e.currentTarget).parent().find('#address_latitude');\r\n                let address_longitude = $(e.currentTarget).parent().find('#address_longitude');\r\n\r\n                if(this.currentText.replace(/\\s/g,'') !== \"\" ){\r\n                    $.ajax({\r\n                        url: 'https://api-adresse.data.gouv.fr/search/',\r\n                        data: {\r\n                            q: this.currentText\r\n                        },\r\n                        complete: (r) => {\r\n                            let array =  r.responseJSON.features;\r\n                            if (array.length > 0){\r\n                                let result = array[0];\r\n                                log(result);\r\n                                log(result.geometry.coordinates[0]);\r\n                                log(result.geometry.coordinates[1]);\r\n                                let longitude = result.geometry.coordinates[0];\r\n                                let latitude = result.geometry.coordinates[1];\r\n                                address_latitude.attr('value',latitude);\r\n                                address_longitude.attr('value',longitude);\r\n                            }\r\n\r\n                        }\r\n                    });\r\n                }\r\n                else{\r\n                    address_latitude.attr('value','');\r\n                    address_longitude.attr('value','');\r\n                }\r\n\r\n            }\r\n\r\n        });\r\n\r\n    }\r\n}\r\n","class VirtualAssemblyFieldUri {\r\n  constructor(dom) {\r\n    this.value = {};\r\n    this.$ = $(dom);\r\n    this.$selector = this.$.find('.tags-selector');\r\n    this.$value = this.$.find('.tags-value');\r\n    this.$tags = this.$.find('.tags');\r\n    this.urlLookup = this.$.attr('data-sf-lookup');\r\n    this.urlLabel = this.$.attr('data-sf-label');\r\n    this.rdfType = this.$.attr('data-sf-rdfType');\r\n    this.$selector.select2({\r\n      width: '100%',\r\n      placeholder: \"Ajoutez un terme ici\",\r\n      ajax: {\r\n        url: this.urlLookup,\r\n        dataType: 'json',\r\n        delay: 250,\r\n        data: this.lookupParams.bind(this),\r\n        processResults: this.lookupProcessResults.bind(this)\r\n      },\r\n      cache: true\r\n    });\r\n    this.$selector.on(\"select2:select\", (e) => {\r\n      this.setValue(this.$selector.val(), this.selectValues[this.$selector.val()]);\r\n    });\r\n\r\n    // Get value.\r\n    let startupValue = this.$value.val();\r\n    // Parse it.\r\n    startupValue = startupValue && JSON.parse(startupValue);\r\n    let getLabelCallback = (label, uri) => {\r\n      this.setValue(uri, label)\r\n    };\r\n    // Load it.\r\n    if (Array.isArray(startupValue)) {\r\n      $.each(startupValue, (key, uri) => {\r\n        // Avoid all kind of empty fields.\r\n        if (uri) {\r\n          this.getUriLabel(uri, getLabelCallback);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  lookupParams(params) {\r\n    return {\r\n      rdfType: this.rdfType,\r\n      QueryString: params.term,\r\n      MaxHits: 15\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Expect to recieve an object with\r\n   * uri => title couples.\r\n   */\r\n  lookupProcessResults(data) {\r\n    let items = [];\r\n    this.selectValues = data;\r\n    // Transform data to select2 expected format.\r\n    $.each(this.selectValues, (uri, title) => {\r\n      items.push({\r\n        id: uri,\r\n        text: title\r\n      })\r\n    });\r\n    return {\r\n      results: items\r\n    };\r\n  }\r\n\r\n  setValue(uri, text) {\r\n    // Add to values.\r\n    this.value[uri] = text;\r\n    // Reload list.\r\n    this.fillValues();\r\n  }\r\n\r\n  fillValues() {\r\n    this.$value.val(JSON.stringify(this.value));\r\n    this.$tags.empty();\r\n    $.each(this.value, (uri, text) => {\r\n      if (text !== false){\r\n        let $item = $('<span class=\"tag\">' + text + ' <a href=\"#\" class=\"remove-tag glyphicon glyphicon-remove\"></a></span>')\r\n        // Click event.\r\n        $item.find('a.remove-tag').click((e) => {\r\n            e.preventDefault();\r\n        delete this.value[uri];\r\n        this.fillValues();\r\n      });\r\n      // Append.\r\n        this.$tags.append($item);\r\n      }\r\n    });\r\n    this.$tags.append('<div class=\"clearfix\"></div>');\r\n    // Show tags section if not empty.\r\n    this.$tags.toggle(!!Object.keys(this.value).length);\r\n    // Clear selector.\r\n    this.$selector.val(null).trigger(\"change\");\r\n  }\r\n\r\n  getUriLabel(uri, complete) {\r\n    if (uri) {\r\n      $.ajax({\r\n        url: this.urlLabel,\r\n        data: {\r\n          uri: uri\r\n        },\r\n        complete: (r) => {\r\n          this.setValue(uri, r.responseJSON.label);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n\r\n","class VirtualAssemblyFieldDbPedia extends VirtualAssemblyFieldUri {\r\n  lookupProcessResults(data) {\r\n    let items = [];\r\n    this.selectValues = {};\r\n    for (let result of data.results) {\r\n      items.push({\r\n        id: result.uri,\r\n        text: result.label\r\n      });\r\n      this.selectValues[result.uri] = result.label;\r\n    }\r\n    return {\r\n      results: items\r\n    };\r\n  }\r\n\r\n  getUriLabel(uri, complete, lang = 'fr', propertyUri = 'http://www.w3.org/2000/01/rdf-schema#label') {\r\n    let callbackLanguage = (values, acceptedLang) => {\r\n      for (let data of values) {\r\n        // Found in asked language.\r\n        if (data.lang === acceptedLang) {\r\n          return data.value;\r\n        }\r\n      }\r\n    };\r\n    $.ajax({\r\n      headers: {\r\n        // Ensure to get JSON response.\r\n        'Accept': 'application/json',\r\n        'Accept-Language': 'fr'\r\n      },\r\n      url: uri,\r\n      complete: (r) => {\r\n        \"use strict\";\r\n        // Avoid errors.\r\n        if (r.responseJSON) {\r\n          // Get all values.\r\n          let values = r.responseJSON[uri][propertyUri];\r\n          // Return asked language || english || first found.\r\n          let value = callbackLanguage(values, lang) || callbackLanguage(values, 'en') || values[0].value;\r\n          complete(value, uri);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\n\r\n","class VirtualAssemblyFieldAdresse extends VirtualAssemblyFieldUri {\r\n    lookupProcessResults(data) {\r\n        let items = [];\r\n        this.selectValues = {};\r\n        for (let result of data.features) {\r\n            items.push({\r\n                id: result.properties.label,\r\n                text: result.properties.label\r\n            });\r\n            this.selectValues[result.properties.label] = result.properties.label;\r\n        }\r\n        return {\r\n            results: items\r\n        };\r\n    }\r\n\r\n    getUriLabel(uri, complete) {\r\n        if (uri) {\r\n            $.ajax({\r\n                url: 'https://api-adresse.data.gouv.fr/search/',\r\n                data: {\r\n                    q: uri\r\n                },\r\n                complete: (r) => {\r\n                let array =  r.responseJSON.features;\r\n            if (array.length > 0){\r\n                let elem = array[0];\r\n                this.setValue(uri, elem.properties['label']);\r\n            }\r\n\r\n        }\r\n        });\r\n        }\r\n    }\r\n    lookupParams(params) {\r\n        return {\r\n            q: params.term,\r\n            MaxHits: 15\r\n        };\r\n    }\r\n}\r\n\r\n\r\n","class VirtualAssemblyFieldMultiple  {\r\n    lookupProcessResults(data) {\r\n        let label = $.trim(data.term);\r\n        this.selectValues = {};\r\n        this.selectValues[label] = label;\r\n        return {\r\n            id: label,\r\n            text: label,\r\n            newTag: true\r\n        };\r\n    }\r\n\r\n    getUriLabel(uri, complete) {\r\n        this.setValue(uri, uri);\r\n\r\n    }\r\n    lookupParams(params) {\r\n        return {\r\n            q: params.term,\r\n            MaxHits: 15\r\n        };\r\n    }\r\n\r\n    constructor(dom) {\r\n        this.value = {};\r\n        this.$ = $(dom);\r\n        this.$selector = this.$.find('.tags-selector');\r\n        this.$value = this.$.find('.tags-value');\r\n        this.$tags = this.$.find('.tags');\r\n        this.urlLookup = this.$.attr('data-sf-lookup');\r\n        this.urlLabel = this.$.attr('data-sf-label');\r\n        this.rdfType = this.$.attr('data-sf-rdfType');\r\n        this.$selector.select2({\r\n            width: '100%',\r\n            placeholder: \"Ajoutez un terme ici\",\r\n            tags:true,\r\n            createTag:this.lookupProcessResults.bind(this),\r\n        });\r\n        this.$selector.on(\"select2:select\", (e) => {\r\n            log(\"yolo\");\r\n            this.setValue(this.$selector.val(), this.selectValues[this.$selector.val()]);\r\n        });\r\n\r\n        // Get value.\r\n        let startupValue = this.$value.val();\r\n        // Parse it.\r\n        startupValue = startupValue && JSON.parse(startupValue);\r\n        let getLabelCallback = (label, uri) => {\r\n            this.setValue(uri, label)\r\n        };\r\n        // Load it.\r\n        if (Array.isArray(startupValue)) {\r\n            $.each(startupValue, (key, uri) => {\r\n                // Avoid all kind of empty fields.\r\n                if (uri) {\r\n                    this.getUriLabel(uri, getLabelCallback);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    setValue(uri, text) {\r\n        log(uri);\r\n        log(text);\r\n        // Add to values.\r\n        this.value[uri] = text;\r\n        // Reload list.\r\n        this.fillValues();\r\n    }\r\n\r\n    fillValues() {\r\n        this.$value.val(JSON.stringify(this.value));\r\n        this.$tags.empty();\r\n        $.each(this.value, (uri, text) => {\r\n            if (text !== false){\r\n                let $item = $('<span class=\"tag\">' + text + ' <a href=\"#\" class=\"remove-tag glyphicon glyphicon-remove\"></a></span>')\r\n                // Click event.\r\n                $item.find('a.remove-tag').click((e) => {\r\n                    e.preventDefault();\r\n                    delete this.value[uri];\r\n                    this.fillValues();\r\n                });\r\n                // Append.\r\n                this.$tags.append($item);\r\n            }\r\n        });\r\n        this.$tags.append('<div class=\"clearfix\"></div>');\r\n        // Show tags section if not empty.\r\n        this.$tags.toggle(!!Object.keys(this.value).length);\r\n        // Clear selector.\r\n        this.$selector.val(null).trigger(\"change\");\r\n    }\r\n}\r\n\r\n\r\n","$(()=> {\r\n  \"use strict\";\r\n  let ucFirst = (text) => {\r\n    return text.charAt(0).toUpperCase() + text.slice(1);\r\n  };\r\n\r\n  $('.select2-tags').each((e, item) => {\r\n    // Build associated class.\r\n    new window['VirtualAssemblyField' + ucFirst($(item).attr('data-sf-type'))](item);\r\n  });\r\n});\r\n","// It knows what to do.\r\nnew CartoAdmin();\r\n\r\n"]}