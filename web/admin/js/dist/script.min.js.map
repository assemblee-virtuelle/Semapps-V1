{"version":3,"sources":["src/VirtualAssembly/SemanticFormsBundle/Resources/scripts/semanticFormsClient.js","web/admin/js/src/class/lgvAdmin.js","web/admin/js/src/class/lgvAdminPage.js","web/admin/js/src/class/lgvAdminPageTeam.js","web/admin/js/src/class/lgvAdminPageProfile.js","web/admin/js/src/class/lgvAdminPageOrga.js","web/admin/js/src/main.js"],"names":["SemanticFormsClient","this","dbPediaResultsMax","options","$","extend","url","window","sfClient","log","m","console","LgvAdmin","_this","_classCallCheck","init","$loadingPageSpin","lgvAdmin","$modalConfirm","$modalConfirmBody","find","$modalConfirmValidate","LgvAdminPageTeam","LgvAdminPageProfile","LgvAdminPageOrga","message","callback","_this2","html","modal","one","removeClass","addClass","LgvAdminPage","admin","cloneWidget","on","parent","first","name","location","href","replace","regex","RegExp","results","exec","decodeURIComponent","_get","prototype","__proto__","Object","getPrototypeOf","call","click","e","preventDefault","userId","currentTarget","attr","modalConfirm","document","getElementById","each","$this","change","roles","val","$toggle","toggle","getParameterByName","$form","pageLoadingStart","submit"],"mappings":"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","file":"script.min.js","sourcesContent":["class SemanticFormsClient {\r\n  consructor() {\r\n    this.dbPediaResultsMax = 15;\r\n  }\r\n\r\n  dbPediaOptions(options) {\r\n    return $.extend({\r\n      url: 'http://lookup.dbpedia.org/fr/api/search/PrefixSearch'\r\n    }, options);\r\n  }\r\n\r\n  getDbPediaFields() {\r\n    return $('.semantic-forms-field-dbPedia')\r\n  }\r\n}\r\n\r\n$(() => {\r\n  \"use strict\";\r\n  window.sfClient = new SemanticFormsClient();\r\n});\r\n","window.log = (m) => {\r\n  \"use strict\";\r\n  console.log(m);\r\n};\r\n\r\nclass LgvAdmin {\r\n  constructor() {\r\n    // Wait document loaded.\r\n    $(()=> {\r\n      this.init();\r\n    });\r\n  }\r\n\r\n  init() {\r\n    this.$loadingPageSpin = $('#loadingPageSpin');\r\n    // Save globally.\r\n    window.lgvAdmin = this;\r\n\r\n    // Define reused variables.\r\n    this.$modalConfirm = $('#modalConfirm');\r\n    this.$modalConfirmBody = this.$modalConfirm.find('.modal-body:first');\r\n    this.$modalConfirmValidate = this.$modalConfirm.find('.btn-primary:first');\r\n\r\n    new LgvAdminPageTeam(this);\r\n    new LgvAdminPageProfile(this);\r\n    new LgvAdminPageOrga(this);\r\n  }\r\n\r\n  modalConfirm(message, callback) {\r\n    this.$modalConfirmBody.html(message);\r\n    this.$modalConfirm.modal('show');\r\n    this.$modalConfirmValidate.one('click', () => {\r\n      this.$modalConfirm.modal('hide');\r\n      callback();\r\n    });\r\n  }\r\n\r\n  pageLoadingStart() {\r\n    this.$loadingPageSpin\r\n      .removeClass('fadeOut')\r\n      .addClass('fadeIn');\r\n  }\r\n\r\n  pageLoadingStop() {\r\n    this.$loadingPageSpin\r\n      .removeClass('fadeIn')\r\n      .addClass('fadeOut');\r\n  }\r\n}\r\n\r\n","class LgvAdminPage {\r\n  constructor(admin) {\r\n    this.admin = admin;\r\n\r\n    // Need wikipedia.js and formInteraction.js\r\n    if (window.cloneWidget) {\r\n      // Manage widgets duplication.\r\n      $(\".form-group\").on('click', '.add-widget', function () {\r\n        cloneWidget($(this)\r\n          .parent()\r\n          .parent()\r\n          .find('.sf-value-block')\r\n          .first()\r\n          .find('.ref')\r\n          .first())\r\n      });\r\n    }\r\n  }\r\n\r\n  getParameterByName(name, url) {\r\n    if (!url) {\r\n      url = window.location.href;\r\n    }\r\n    name = name.replace(/[\\[\\]]/g, \"\\\\$&\");\r\n    var regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\r\n      results = regex.exec(url);\r\n    if (!results) return null;\r\n    if (!results[2]) return '';\r\n    return decodeURIComponent(results[2].replace(/\\+/g, \" \"));\r\n  }\r\n}\r\n","class LgvAdminPageTeam extends LgvAdminPage {\r\n  init() {\r\n    super.init();\r\n\r\n    // On user profile, remove user button.\r\n    $('.team-user-delete').click((e) => {\r\n      // Disable default click behavior.\r\n      e.preventDefault();\r\n      let userId = $(e.currentTarget).attr('rel');\r\n      // Use custom modal for message.\r\n      this.admin.modalConfirm('Êtes-vous sûr de vouloir supprimer ce compte ? ' +\r\n        'Toutes les informations du profil seront perdues, ' +\r\n        'et le membre n\\'aura plus accès au site.', () => {\r\n        window.location.replace('/mon-compte/user/delete/' + userId);\r\n      });\r\n    });\r\n\r\n    $(document.getElementById('teamManager')).find('tr').each(function () {\r\n      let $this = $(this);\r\n      let userId = $this.attr('rel');\r\n\r\n      // Manage select changes.\r\n      $this.find('select[name=accessLevel]').change(function () {\r\n          let roles = $(this).val();\r\n          window.location.replace('/mon-compte/access/change/' + userId + '/' + roles);\r\n      });\r\n    });\r\n  }\r\n}\r\n","class LgvAdminPageProfile extends LgvAdminPage {\r\n  init() {\r\n    super.init();\r\n\r\n    // Click on edit profile button.\r\n    let $toggle = $('.profileEditToSwitch');\r\n    $('.profileEditSwitch').click(() => {\r\n      $toggle.toggle();\r\n    });\r\n\r\n    // Display form if asked.\r\n    if (this.getParameterByName('edit')) {\r\n      $toggle.toggle();\r\n    }\r\n\r\n    // Change image field.\r\n    let $form = $('#profilePictureForm');\r\n    $form.find('input[type=\"file\"]').change(()=> {\r\n      // Display a nice spinner.\r\n      lgvAdmin.pageLoadingStart();\r\n      // Send form will reload the page.\r\n      $form.submit();\r\n    });\r\n  }\r\n}\r\n","class LgvAdminPageOrga extends LgvAdminPage {\r\n  init() {\r\n    super.init();\r\n\r\n    // On user profile, remove user button.\r\n    $('.orga-delete').click((e) => {\r\n      // Disable default click behavior.\r\n      e.preventDefault();\r\n      var userId = $(e.currentTarget).attr('rel');\r\n      // Use custom modal for message.\r\n      this.admin.modalConfirm('Êtes-vous sûr de vouloir supprimer cette organisation ? Tous les membres associés vont être supprimés.', () => {\r\n        window.location.replace('/mon-compte/orga/delete/' + userId);\r\n      });\r\n    });\r\n  }\r\n}\r\n","// It knows what to do.\nnew LgvAdmin();\n\n"]}