{"version":3,"sources":["web/front/src/semapps-ressource/semapps-ressource.js"],"names":["Polymer","is","properties","person","String","queryParams","observer","_queryChanged","data","_this","this","uri","SemAppsCarto","ready","ressourceLoad","attached","_this2","semapps","initElementGlobals","handleBack","e","preventDefault","goToPath","encodedUri","encodedUriPerson","_this3","myRoute","loading","$","ressource","style","display","ajax","ressourceLoadComplete","responseJSON","log","ressourcesNeeded","ressourcesProposed","title","name"],"mappings":"YAAAA,UACEC,GAAI,oBACJC,YACIC,OAAQC,OACRC,aACIC,SAAU,kBAGhBC,cAAe,SAAUC,GAAM,GAAAC,GAAAC,IAGvBF,IAAQA,EAAKG,KAAOH,EAAKL,SACzBO,KAAKP,OAASK,EAAKL,OAEnBS,aAAaC,MAAM,WACfJ,EAAKK,cAAcN,EAAKG,IAAIH,EAAKL,YAI/CY,SAnBM,WAmBK,GAAAC,GAAAN,IAETE,cAAaC,MAAM,WACbI,QAAQC,mBAARF,MAGNG,WAzBI,SAyBQC,GAERA,EAAEC,iBACFJ,QAAQK,SAAS,UACbX,IAAKD,KAAKP,UAGnBW,cAhCK,SAgCUS,EAAWC,GAAkB,GAAAC,GAAAf,IAEhB,eAApBO,QAAQS,UAERhB,KAAKiB,SAAU,EAEfjB,KAAKkB,EAAEC,UAAUC,MAAMC,QAAU,OAEhCd,QAAQe,KAAK,4BAA8BT,EAAW,WAAWC,EAAkB,SAAChB,GAGhFiB,EAAKQ,sBAAsBzB,OAIxCyB,sBA/CK,SA+CkBzB,GAGlBE,KAAKkB,EAAEC,UAAUC,MAAMC,QAAU,GACjCvB,EAAOA,EAAK0B,aAAaL,cACzBM,IAAI3B,EAAK4B,kBACTD,IAAIzB,KAAK0B,kBACT1B,KAAK0B,iBAAmB5B,EAAK4B,iBAC7B1B,KAAK2B,mBAAqB7B,EAAK6B,mBAC/B3B,KAAK4B,MAAQ9B,EAAK+B,KAClB7B,KAAKiB,SAAU","file":"semapps-ressource.min.js","sourcesContent":["Polymer({\r\n  is: 'semapps-ressource',\r\n  properties: {\r\n      person: String,\r\n      queryParams: {\r\n          observer: '_queryChanged'\r\n      }\r\n  },\r\n    _queryChanged: function (data) {\r\n        // We are on the search mode.\r\n        \"use strict\";\r\n        if (data && data.uri && data.person) {\r\n            this.person = data.person;\r\n            // Wait main object to be ready.\r\n            SemAppsCarto.ready(() => {\r\n                this.ressourceLoad(data.uri,data.person);\r\n            });\r\n        }\r\n    },\r\n  attached() {\r\n    \"use strict\";\r\n    SemAppsCarto.ready(() => {\r\n          semapps.initElementGlobals(this);\r\n      });\r\n  },\r\n    handleBack (e) {\r\n        \"use strict\";\r\n        e.preventDefault();\r\n        semapps.goToPath('detail', {\r\n            uri: this.person,\r\n        });\r\n    },\r\n   ressourceLoad (encodedUri,encodedUriPerson) {\r\n        \"use strict\";\r\n       if( semapps.myRoute === \"ressource\"){\r\n           // Show spinner.\r\n           this.loading = true;\r\n           // Hide content.\r\n           this.$.ressource.style.display = 'none';\r\n            // Request server.\r\n            semapps.ajax('webservice/ressource?uri=' + encodedUri+'&person='+encodedUriPerson, (data) => {\r\n                \"use strict\";\r\n                // Check that we are on the last callback expected.\r\n                this.ressourceLoadComplete(data)\r\n            });\r\n        }\r\n    },\r\n   ressourceLoadComplete (data) {\r\n       \"use strict\";\r\n        // Show detail content.\r\n        this.$.ressource.style.display = '';\r\n        data = data.responseJSON.ressource || {};\r\n        log(data.ressourcesNeeded);\r\n        log(this.ressourcesNeeded);\r\n        this.ressourcesNeeded = data.ressourcesNeeded;\r\n        this.ressourcesProposed = data.ressourcesProposed;\r\n        this.title = data.name;\r\n        this.loading = false;\r\n    }\r\n\r\n});\r\n"]}