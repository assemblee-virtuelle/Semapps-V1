{"version":3,"sources":["web/front/src/semapps-ressource/semapps-ressource.js"],"names":["Polymer","is","properties","person","String","queryParams","observer","_queryChanged","data","_this","this","uri","SemAppsCarto","ready","ressourceLoad","attached","_this2","semapps","initElementGlobals","handleBack","e","preventDefault","goSearch","encodedUri","encodedUriPerson","_this3","myRoute","loading","$","ressource","style","display","ajax","ressourceLoadComplete","responseJSON","ressourcesNeeded","ressourcesProposed","hasSubject","skill","title","name","detail","handleClickDetail","goToPath","window","encodeURIComponent","currentTarget","getAttribute"],"mappings":"YAAAA,UACIC,GAAI,oBACJC,YACIC,OAAQC,OACRC,aACIC,SAAU,kBAGlBC,cAAe,SAAUC,GAAM,GAAAC,GAAAC,IAGvBF,IAAQA,EAAKG,KAAOH,EAAKL,SACzBO,KAAKP,OAASK,EAAKL,OAEnBS,aAAaC,MAAM,WACfJ,EAAKK,cAAcN,EAAKG,IAAIH,EAAKL,YAI7CY,SAnBI,WAmBO,GAAAC,GAAAN,IAEPE,cAAaC,MAAM,WACfI,QAAQC,mBAARF,MAGRG,WAzBI,SAyBQC,GAERA,EAAEC,iBACFJ,QAAQK,YAEZR,cA9BI,SA8BWS,EAAWC,GAAkB,GAAAC,GAAAf,IAMhB,eAApBO,QAAQS,UAERhB,KAAKiB,SAAU,EAEfjB,KAAKkB,EAAEC,UAAUC,MAAMC,QAAU,OAEjCd,QAAQe,KAAK,4BAA8BT,EAAW,WAAWC,EAAkB,SAAChB,GAGhFiB,EAAKQ,sBAAsBzB,OAIvCyB,sBAjDI,SAiDmBzB,GAGnBE,KAAKkB,EAAEC,UAAUC,MAAMC,QAAU,GACjCvB,EAAOA,EAAK0B,aAAaL,cACzBnB,KAAKyB,iBAAmB3B,EAAK2B,iBAC7BzB,KAAK0B,mBAAqB5B,EAAK4B,mBAC/B1B,KAAK2B,WAAa7B,EAAK6B,WACvB3B,KAAK4B,MAAQ9B,EAAK8B,MAClB5B,KAAK6B,MAAQ/B,EAAKgC,KAClB9B,KAAK+B,OAASjC,EAAKiC,OACnB/B,KAAKiB,SAAU,GAEnBe,kBA9DI,SA8DctB,GACdA,EAAEC,iBACFJ,QAAQ0B,SAAS,UACbhC,IAAKiC,OAAOC,mBAAmBzB,EAAE0B,cAAcC,aAAa","file":"semapps-ressource.min.js","sourcesContent":["Polymer({\n    is: 'semapps-ressource',\n    properties: {\n        person: String,\n        queryParams: {\n            observer: '_queryChanged'\n        }\n    },\n    _queryChanged: function (data) {\n        // We are on the search mode.\n        \"use strict\";\n        if (data && data.uri && data.person) {\n            this.person = data.person;\n            // Wait main object to be ready.\n            SemAppsCarto.ready(() => {\n                this.ressourceLoad(data.uri,data.person);\n            });\n        }\n    },\n    attached() {\n        \"use strict\";\n        SemAppsCarto.ready(() => {\n            semapps.initElementGlobals(this);\n        });\n    },\n    handleBack (e) {\n        \"use strict\";\n        e.preventDefault();\n        semapps.goSearch();\n    },\n    ressourceLoad (encodedUri,encodedUriPerson) {\n        \"use strict\";\n        // log('aaaaaaaaaaaaaaaaaaaaaaaaaaaa');\n        // if (window.location.pathname.indexOf(\"ressource\") !== -1)\n        //     semapps.myRoute = \"ressource\";\n\n        if( semapps.myRoute === \"ressource\"){\n            // Show spinner.\n            this.loading = true;\n            // Hide content.\n            this.$.ressource.style.display = 'none';\n            // Request server.\n            semapps.ajax('webservice/ressource?uri=' + encodedUri+'&person='+encodedUriPerson, (data) => {\n                \"use strict\";\n                // Check that we are on the last callback expected.\n                this.ressourceLoadComplete(data)\n            });\n        }\n    },\n    ressourceLoadComplete (data) {\n        \"use strict\";\n        // Show detail content.\n        this.$.ressource.style.display = '';\n        data = data.responseJSON.ressource || {};\n        this.ressourcesNeeded = data.ressourcesNeeded;\n        this.ressourcesProposed = data.ressourcesProposed;\n        this.hasSubject = data.hasSubject;\n        this.skill = data.skill;\n        this.title = data.name;\n        this.detail = data.detail;\n        this.loading = false;\n    },\n    handleClickDetail(e) {\n        e.preventDefault();\n        semapps.goToPath('detail', {\n            uri: window.encodeURIComponent(e.currentTarget.getAttribute('rel'))\n        });\n    },\n\n});\n"]}