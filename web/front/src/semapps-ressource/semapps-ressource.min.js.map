{"version":3,"sources":["web/front/src/semapps-ressource/semapps-ressource.js"],"names":["Polymer","is","properties","person","String","queryParams","observer","_queryChanged","data","_this","this","uri","SemAppsCarto","ready","ressourceLoad","attached","_this2","semapps","initElementGlobals","handleBack","e","preventDefault","goSearch","encodedUri","encodedUriPerson","_this3","myRoute","loading","$","ressource","style","display","ajax","ressourceLoadComplete","responseJSON","ressourcesNeeded","ressourcesProposed","hasSubject","title","name","detail","handleClickDetail","goToPath","window","encodeURIComponent","currentTarget","getAttribute"],"mappings":"YAAAA,UACEC,GAAI,oBACJC,YACIC,OAAQC,OACRC,aACIC,SAAU,kBAGhBC,cAAe,SAAUC,GAAM,GAAAC,GAAAC,IAGvBF,IAAQA,EAAKG,KAAOH,EAAKL,SACzBO,KAAKP,OAASK,EAAKL,OAEnBS,aAAaC,MAAM,WACfJ,EAAKK,cAAcN,EAAKG,IAAIH,EAAKL,YAI/CY,SAnBM,WAmBK,GAAAC,GAAAN,IAETE,cAAaC,MAAM,WACbI,QAAQC,mBAARF,MAGNG,WAzBI,SAyBQC,GAERA,EAAEC,iBACFJ,QAAQK,YAEbR,cA9BK,SA8BUS,EAAWC,GAAkB,GAAAC,GAAAf,IAEhB,eAApBO,QAAQS,UAERhB,KAAKiB,SAAU,EAEfjB,KAAKkB,EAAEC,UAAUC,MAAMC,QAAU,OAEhCd,QAAQe,KAAK,4BAA8BT,EAAW,WAAWC,EAAkB,SAAChB,GAGhFiB,EAAKQ,sBAAsBzB,OAIxCyB,sBA7CK,SA6CkBzB,GAGlBE,KAAKkB,EAAEC,UAAUC,MAAMC,QAAU,GACjCvB,EAAOA,EAAK0B,aAAaL,cACzBnB,KAAKyB,iBAAmB3B,EAAK2B,iBAC7BzB,KAAK0B,mBAAqB5B,EAAK4B,mBAC/B1B,KAAK2B,WAAa7B,EAAK6B,WACvB3B,KAAK4B,MAAQ9B,EAAK+B,KAClB7B,KAAK8B,OAAShC,EAAKgC,OACnB9B,KAAKiB,SAAU,GAEnBc,kBAzDI,SAyDcrB,GACdA,EAAEC,iBACFJ,QAAQyB,SAAS,UACb/B,IAAKgC,OAAOC,mBAAmBxB,EAAEyB,cAAcC,aAAa","file":"semapps-ressource.min.js","sourcesContent":["Polymer({\r\n  is: 'semapps-ressource',\r\n  properties: {\r\n      person: String,\r\n      queryParams: {\r\n          observer: '_queryChanged'\r\n      }\r\n  },\r\n    _queryChanged: function (data) {\r\n        // We are on the search mode.\r\n        \"use strict\";\r\n        if (data && data.uri && data.person) {\r\n            this.person = data.person;\r\n            // Wait main object to be ready.\r\n            SemAppsCarto.ready(() => {\r\n                this.ressourceLoad(data.uri,data.person);\r\n            });\r\n        }\r\n    },\r\n  attached() {\r\n    \"use strict\";\r\n    SemAppsCarto.ready(() => {\r\n          semapps.initElementGlobals(this);\r\n      });\r\n  },\r\n    handleBack (e) {\r\n        \"use strict\";\r\n        e.preventDefault();\r\n        semapps.goSearch();\r\n    },\r\n   ressourceLoad (encodedUri,encodedUriPerson) {\r\n        \"use strict\";\r\n       if( semapps.myRoute === \"ressource\"){\r\n           // Show spinner.\r\n           this.loading = true;\r\n           // Hide content.\r\n           this.$.ressource.style.display = 'none';\r\n            // Request server.\r\n            semapps.ajax('webservice/ressource?uri=' + encodedUri+'&person='+encodedUriPerson, (data) => {\r\n                \"use strict\";\r\n                // Check that we are on the last callback expected.\r\n                this.ressourceLoadComplete(data)\r\n            });\r\n        }\r\n    },\r\n   ressourceLoadComplete (data) {\r\n       \"use strict\";\r\n        // Show detail content.\r\n        this.$.ressource.style.display = '';\r\n        data = data.responseJSON.ressource || {};\r\n        this.ressourcesNeeded = data.ressourcesNeeded;\r\n        this.ressourcesProposed = data.ressourcesProposed;\r\n        this.hasSubject = data.hasSubject;\r\n        this.title = data.name;\r\n        this.detail = data.detail;\r\n        this.loading = false;\r\n    },\r\n    handleClickDetail(e) {\r\n        e.preventDefault();\r\n        semapps.goToPath('detail', {\r\n            uri: window.encodeURIComponent(e.currentTarget.getAttribute('rel'))\r\n        });\r\n    },\r\n\r\n});\r\n"]}