{"version":3,"sources":["web/front/src/semapps-ressource/semapps-ressource.js"],"names":["Polymer","is","properties","person","String","queryParams","observer","_queryChanged","data","_this","this","uri","SemAppsCarto","ready","ressourceLoad","attached","_this2","semapps","initElementGlobals","handleBack","e","preventDefault","goSearch","encodedUri","encodedUriPerson","_this3","myRoute","loading","$","ressource","style","display","ajax","ressourceLoadComplete","responseJSON","ressourcesNeeded","ressourcesProposed","hasSubject","skill","title","name","detail","handleClickDetail","goToPath","window","encodeURIComponent","currentTarget","getAttribute"],"mappings":"YAAAA,UACIC,GAAI,oBACJC,YACIC,OAAQC,OACRC,aACIC,SAAU,kBAGlBC,cAAe,SAAUC,GAAM,GAAAC,GAAAC,IAGvBF,IAAQA,EAAKG,KAAOH,EAAKL,SACzBO,KAAKP,OAASK,EAAKL,OAEnBS,aAAaC,MAAM,WACfJ,EAAKK,cAAcN,EAAKG,IAAIH,EAAKL,YAI7CY,SAnBI,WAmBO,GAAAC,GAAAN,IAEPE,cAAaC,MAAM,WACfI,QAAQC,mBAARF,MAGRG,WAzBI,SAyBQC,GAERA,EAAEC,iBACFJ,QAAQK,YAEZR,cA9BI,SA8BWS,EAAWC,GAAkB,GAAAC,GAAAf,IAMhB,eAApBO,QAAQS,UAERhB,KAAKiB,SAAU,EAEfjB,KAAKkB,EAAEC,UAAUC,MAAMC,QAAU,OAEjCd,QAAQe,KAAK,4BAA8BT,EAAW,WAAWC,EAAkB,SAAChB,GAGhFiB,EAAKQ,sBAAsBzB,OAIvCyB,sBAjDI,SAiDmBzB,GAGnBE,KAAKkB,EAAEC,UAAUC,MAAMC,QAAU,GACjCvB,EAAOA,EAAK0B,aAAaL,cACzBnB,KAAKyB,iBAAmB3B,EAAK2B,iBAC7BzB,KAAK0B,mBAAqB5B,EAAK4B,mBAC/B1B,KAAK2B,WAAa7B,EAAK6B,WACvB3B,KAAK4B,MAAQ9B,EAAK8B,MAClB5B,KAAK6B,MAAQ/B,EAAKgC,KAClB9B,KAAK+B,OAASjC,EAAKiC,OACnB/B,KAAKiB,SAAU,GAEnBe,kBA9DI,SA8DctB,GACdA,EAAEC,iBACFJ,QAAQ0B,SAAS,UACbhC,IAAKiC,OAAOC,mBAAmBzB,EAAE0B,cAAcC,aAAa","file":"semapps-ressource.min.js","sourcesContent":["Polymer({\r\n    is: 'semapps-ressource',\r\n    properties: {\r\n        person: String,\r\n        queryParams: {\r\n            observer: '_queryChanged'\r\n        }\r\n    },\r\n    _queryChanged: function (data) {\r\n        // We are on the search mode.\r\n        \"use strict\";\r\n        if (data && data.uri && data.person) {\r\n            this.person = data.person;\r\n            // Wait main object to be ready.\r\n            SemAppsCarto.ready(() => {\r\n                this.ressourceLoad(data.uri,data.person);\r\n            });\r\n        }\r\n    },\r\n    attached() {\r\n        \"use strict\";\r\n        SemAppsCarto.ready(() => {\r\n            semapps.initElementGlobals(this);\r\n        });\r\n    },\r\n    handleBack (e) {\r\n        \"use strict\";\r\n        e.preventDefault();\r\n        semapps.goSearch();\r\n    },\r\n    ressourceLoad (encodedUri,encodedUriPerson) {\r\n        \"use strict\";\r\n        // log('aaaaaaaaaaaaaaaaaaaaaaaaaaaa');\r\n        // if (window.location.pathname.indexOf(\"ressource\") !== -1)\r\n        //     semapps.myRoute = \"ressource\";\r\n\r\n        if( semapps.myRoute === \"ressource\"){\r\n            // Show spinner.\r\n            this.loading = true;\r\n            // Hide content.\r\n            this.$.ressource.style.display = 'none';\r\n            // Request server.\r\n            semapps.ajax('webservice/ressource?uri=' + encodedUri+'&person='+encodedUriPerson, (data) => {\r\n                \"use strict\";\r\n                // Check that we are on the last callback expected.\r\n                this.ressourceLoadComplete(data)\r\n            });\r\n        }\r\n    },\r\n    ressourceLoadComplete (data) {\r\n        \"use strict\";\r\n        // Show detail content.\r\n        this.$.ressource.style.display = '';\r\n        data = data.responseJSON.ressource || {};\r\n        this.ressourcesNeeded = data.ressourcesNeeded;\r\n        this.ressourcesProposed = data.ressourcesProposed;\r\n        this.hasSubject = data.hasSubject;\r\n        this.skill = data.skill;\r\n        this.title = data.name;\r\n        this.detail = data.detail;\r\n        this.loading = false;\r\n    },\r\n    handleClickDetail(e) {\r\n        e.preventDefault();\r\n        semapps.goToPath('detail', {\r\n            uri: window.encodeURIComponent(e.currentTarget.getAttribute('rel'))\r\n        });\r\n    },\r\n\r\n});\r\n"]}