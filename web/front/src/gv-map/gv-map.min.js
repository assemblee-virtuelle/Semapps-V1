"use strict";Polymer({is:"gv-map",properties:{route:{type:Object,observer:"_routeChanged"}},_routeChanged:function(){this.updateVisibility()},attached:function(){var e=this;this.$gvMap=$(document.getElementById("gv-map")),this.$gvMapPins=$(document.getElementById("gv-map-pins")),this.$mapZones=this.$gvMap.find(".mapZone"),this.hoverActive=!0,window.gvmap=this,this.$mapZones.on("mouseover",function(t){e.hoverActive&&e.mapSelectBuilding(t.currentTarget.getAttribute("id").split("-")[1])}).on("mouseout",function(t){e.hoverActive&&e.mapDeselectBuilding(t.currentTarget.getAttribute("id").split("-")[1])}).on("click",function(t){var i=t.currentTarget.getAttribute("id").split("-")[1];i=i!==window.gvc.buildingSelected?i:gvc.buildingSelectedAll,window.gvc.buildingSelected=i,e.mapSelectBuilding(i),window.gvc.searchEvent(),e.hoverActive=!1,window.gvc.scrollToSearchResults(function(){e.hoverActive=!0})}),this.updateVisibility()},mapSelectBuilding:function(e){this.mapDeselectBuilding(),this.mapIsOver=!0,gvc.buildingSelected=this.mapSelectCurrent=e;var t=this.mapGetZone(this.mapSelectCurrent);t?(t.classList.add("strong"),t.classList.remove("discreet"),this.mapSelectBuildingToggle(!0)):this.mapSelectBuildingToggle(!1)},mapDeselectBuilding:function(){var e=this;log(this.mapSelectCurrent),this.mapSelectCurrent&&(this.mapGetZone(this.mapSelectCurrent).classList.remove("strong"),delete this.mapSelectCurrent),this.mapTimeout&&clearTimeout(this.mapTimeout),this.mapIsOver=!1,this.mapTimeout=setTimeout(function(){e.mapIsOver||e.mapDeselectBuildingReset()},500)},mapDeselectBuildingReset:function(){this.mapTimeout=!1,this.mapSelectBuildingToggle(!1)},mapSelectBuildingToggle:function(e){var t=e?"add":"remove";this.$mapZones.each(function(e,i){i.classList[t]("discreet")})},mapGetZone:function(e){return document.getElementById("mapZone-"+e)},mapShowBuildingPinAll:function(){this.$gvMapPins.empty();var e=!0,t=!1,i=void 0;try{for(var n,a=Object.keys(gvc.buildings)[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var s=n.value;this.mapShowBuildingPin(gvc.buildings[s].key)}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}},mapShowBuildingPin:function(e){if(e!==gvc.buildingSelectedAll){var t=document.createElement("gv-map-pin");t.building=e,this.$gvMapPins.append(t)}},updateVisibility:function(){switch(gvc.mainComponent.get("route.path").split("/")[1]){case"detail":this.$gvMap.addClass("fadeOut").removeClass("fadeIn");break;default:this.$gvMap.addClass("fadeIn").removeClass("fadeOut")}}});
//# sourceMappingURL=gv-map.min.js.map
