"use strict";Polymer({is:"gv-map",properties:{route:{type:Object,observer:"_routeChanged"},pins:{type:Array,value:[]},pinsRegistry:{type:Object,value:{}}},_routeChanged:function(){this.updateVisibility()},attached:function(){this.ready=!1,this.$gvMap=$(document.getElementById("gv-map")),this.$gvMapPins=$(document.getElementById("gv-map-pins")),this.$mapZones=this.$gvMap.find(".mapZone"),this.hoverActive=!0,this.domPins={},gvc.map=this,GVCarto.ready(this.start.bind(this)),GVCarto.ready(function(){})},start:function(){var i=this,t=[];$.each(gvc.buildings,function(i){t.push(i)}),this.pins=t,this.$mapZones.on("mouseover",function(t){i.hoverActive&&i.buildingHighlight(t.currentTarget.getAttribute("id").split("-")[1])}).on("mouseout",function(t){i.hoverActive&&i.buildingHighlightOff(t.currentTarget.getAttribute("id").split("-")[1])}).on("click",function(t){var e=t.currentTarget.getAttribute("id").split("-")[1];i.buildingSelect(e),i.hoverActive=!1,window.gvc.scrollToSearchResults(function(){i.hoverActive=!0})})},buildingHighlight:function(i){this.buildingHighlightOff(),this.mapIsOver=!0,this.buildingHighlighted=i;var t=this.zoneGet(this.buildingHighlighted);t?(t.classList.add("strong"),t.classList.remove("discreet"),this.buildingHideAll(!0)):this.buildingHideAll(!1)},buildingHighlightOff:function(){var i=this;this.buildingHighlighted&&(this.zoneGet(this.buildingHighlighted).classList.remove("strong"),delete this.buildingHighlighted),this.mapTimeout&&clearTimeout(this.mapTimeout),this.mapIsOver=!1,this.mapTimeout=setTimeout(function(){i.mapIsOver||i.buildingHighlightReset()},500)},buildingHighlightReset:function(){this.mapTimeout=!1,this.buildingHideAll(!1)},buildingHideAll:function(i){var t=i?"add":"remove";this.$mapZones.each(function(i,e){e.classList[t]("discreet")})},buildingSelect:function(i){gvc.buildingSelected&&gvc.buildingSelected!=gvc.buildingSelectedAll&&this.pinsRegistry[gvc.buildingSelected].$$(".gv-map-pin-wrapper").classList.remove("selected"),gvc.buildingSelected=i||gvc.buildingSelectedAll,i&&this.pinsRegistry[i].$$(".gv-map-pin-wrapper").classList.add("selected"),gvc.results.searchRender()},zoneGet:function(i){return document.getElementById("mapZone-"+i)},pinShow:function(i,t){this.pinsRegistry[i].show(t)},pinHide:function(i){this.pinsRegistry[i].hide()}});
//# sourceMappingURL=gv-map.min.js.map
