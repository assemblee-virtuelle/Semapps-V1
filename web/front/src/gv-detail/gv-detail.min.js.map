{"version":3,"sources":["web/front/src/gv-detail/gv-detail.js"],"names":["Polymer","is","properties","id","String","title","description","route","type","Object","observer","queryParams","_queryChanged","data","_this","this","console","debug","uri","GVCarto","ready","detailLoad","loadUri","handleBack","e","preventDefault","history","back","gvc","scrollToSearchResults","attached","domLoadingSpinner","domId","encodedUri","_this2","style","display","$","detail","ajax","detailLoadComplete","responseJSON","image","imageOrFallback","inner","document","createElement","searchTypes","toLowerCase","domInner","getElementById","innerHTML","appendChild"],"mappings":"YAAAA,UACEC,GAAI,YACJC,YACEC,GAAIC,OACJC,MAAOD,OACPE,YAAaF,OACbG,OACEC,KAAMC,OACNC,SAAU,iBAEZC,aACED,SAAU,kBAIdE,cAfM,SAeSC,GAAM,GAAAC,GAAAC,IAEnBC,SAAQC,MAAMJ,GACVA,EAAKK,KAEPC,QAAQC,MAAM,WACZN,EAAKO,WAAWR,EAAKK,QAK3BI,QA1BM,SA0BEJ,KAKRK,WA/BM,SA+BMC,GAEVA,EAAEC,iBACFC,QAAQC,OACRC,IAAIC,yBAGNC,SAtCM,WAwCJf,KAAKgB,kBAAoBH,IAAII,MAAM,kBAGrCX,WA3CM,SA2CMY,GAAY,GAAAC,GAAAnB,IAGtBA,MAAKgB,kBAAkBI,MAAMC,QAAU,QAEvCrB,KAAKsB,EAAEC,OAAOH,MAAMC,QAAU,OAE9BR,IAAIW,KAAK,0BAA4BN,EAAY,SAACpB,GAGhDqB,EAAKM,mBAAmB3B,MAI5B2B,mBAzDM,SAyDc3B,GAGlBE,KAAKsB,EAAEC,OAAOH,MAAMC,QAAU,GAE9BrB,KAAKgB,kBAAkBI,MAAMC,QAAU,OACvCvB,EAAOA,EAAK4B,aAAaH,WACzBzB,EAAKX,WAAWwC,MAAQd,IAAIe,gBAAgB9B,EAAKX,WAAWwC,MAAO7B,EAAKX,WAAWM,KAEnF,IAAIoC,GAAQC,SAASC,cAAc,aAAelB,IAAImB,YAAYlC,EAAKX,WAAWM,MAAMA,KAAKwC,cAC7FJ,GAAM/B,KAAOA,CACb,IAAIoC,GAAWJ,SAASK,eAAe,kBACvCD,GAASE,UAAY,GACrBF,EAASG,YAAYR","file":"gv-detail.min.js","sourcesContent":["Polymer({\r\n  is: 'gv-detail',\r\n  properties: {\r\n    id: String,\r\n    title: String,\r\n    description: String,\r\n    route: {\r\n      type: Object,\r\n      observer: '_routeChanged'\r\n    },\r\n    queryParams: {\r\n      observer: '_queryChanged'\r\n    }\r\n  },\r\n\r\n  _queryChanged (data) {\r\n    \"use strict\";\r\n    console.debug(data);\r\n    if (data.uri) {\r\n      // Wait main object to be ready.\r\n      GVCarto.ready(() => {\r\n        this.detailLoad(data.uri);\r\n      });\r\n    }\r\n  },\r\n\r\n  loadUri(uri) {\r\n    \"use strict\";\r\n\r\n  },\r\n\r\n  handleBack (e) {\r\n    \"use strict\";\r\n    e.preventDefault();\r\n    history.back();\r\n    gvc.scrollToSearchResults();\r\n  },\r\n\r\n  attached () {\r\n    \"use strict\";\r\n    this.domLoadingSpinner = gvc.domId('detailSpinner');\r\n  },\r\n\r\n  detailLoad (encodedUri) {\r\n    \"use strict\";\r\n    // Show spinner.\r\n    this.domLoadingSpinner.style.display = 'block';\r\n    // Hide content.\r\n    this.$.detail.style.display = 'none';\r\n    // Request server.\r\n    gvc.ajax('/webservice/detail?uri=' + encodedUri, (data) => {\r\n      \"use strict\";\r\n      // Check that we are on the last callback expected.\r\n      this.detailLoadComplete(data)\r\n    });\r\n  },\r\n\r\n  detailLoadComplete (data) {\r\n    \"use strict\";\r\n    // Show detail content.\r\n    this.$.detail.style.display = '';\r\n    // Hide spin.\r\n    this.domLoadingSpinner.style.display = 'none';\r\n    data = data.responseJSON.detail || {};\r\n    data.properties.image = gvc.imageOrFallback(data.properties.image, data.properties.type);\r\n    // Create inner depending of type.\r\n    let inner = document.createElement('gv-detail-' + gvc.searchTypes[data.properties.type].type.toLowerCase());\r\n    inner.data = data;\r\n    let domInner = document.getElementById('gv-detail-inner');\r\n    domInner.innerHTML = '';\r\n    domInner.appendChild(inner);\r\n  }\r\n});\r\n"]}