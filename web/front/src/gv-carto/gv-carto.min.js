"use strict";Polymer({is:"gv-carto",ready:function(){window.log=function(t){console.log(t)},window.gvc=this,this.$window=$(window),this.buildingSelected="all","127.0.0.1"===window.location.hostname&&window.document.body.classList.add("dev-env"),this.ajaxMultiple({buildings:"webservice/building"},this.start)},ajaxMultiple:function(t,e){var i=0,s={},n=this;for(var r in t)i++,$.ajax({url:t[r],complete:function(t){return function(r){i--,s[t]=JSON.parse(r.responseText),0===i&&e.call(n,s)}}(r)})},start:function(t){var e=this;this.buildings=t.buildings,this.domSearchTextInput=this.domId("searchText"),this.domSearchResults=this.domId("searchResults"),this.stateSet("waiting");var i=this.searchEvent.bind(this);this.listen("searchForm","submit",function(t){e.scrollToSearch(),i(t)});var s;this.listen("searchText","keyup",function(){s&&window.clearTimeout(s),s=window.setTimeout(i,500)})},stateSet:function(t){if(this.stateCurrent!==t){var e=t.charAt(0).toUpperCase()+t.slice(1);if(this.stateCurrent){var i=this.stateCurrent.charAt(0).toUpperCase()+this.stateCurrent.slice(1);this["state"+i+"Exit"](),this.stateCurrent=null}this["state"+e+"Init"]()!==!1&&(this.stateCurrent=t)}},stateWaitingInit:function(){},stateWaitingExit:function(){},stateSearchInit:function(){if(!this.domSearchTextInput.value)return this.stateSet("waiting"),!1},stateSearchExit:function(){},scrollToSearch:function(){this.$window.scrollTo($("#searchTabs").offset().top-150,{duration:1e3,easing:"easeOutQuad"})},searchEvent:function(t){t&&t.preventDefault();var e=this.domSearchTextInput.value;this.search(e,{building:this.buildingSelected})},search:function(t){var e=this;arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.stateSet("search"),this.domSearchResults.innerHTML="",t&&$.ajax({url:"webservice/search?t="+encodeURIComponent(t),dataType:"json",complete:function(t){e.renderSearchResult(t.responseJSON)}})},renderSearchResult:function(t){for(var e in t.results){var i=t.results[e],s=document.createElement("gv-results-item");s.label=i.label,s.uri=i.uri,this.domSearchResults.appendChild(s)}},listen:function(t,e,i){if(!Array.isArray(e))return this.domId(t).addEventListener(e,i);for(var s in e)this.listen(t,e[s],i)},domId:function(t){return document.getElementById(t)},dom:function(t){return document.querySelectorAll(t)}});
//# sourceMappingURL=gv-carto.min.js.map
