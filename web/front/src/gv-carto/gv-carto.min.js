"use strict";Polymer({is:"gv-carto",ready:function(){window.log=function(t){console.log(t)},window.gvc=this,this.$window=$(window),this.buildingSelected="all","127.0.0.1"===window.location.hostname&&window.document.body.classList.add("dev-env"),this.ajaxMultiple({buildings:"webservice/building"},this.start)},ajaxMultiple:function(t,e){var i=0,n={},s=this;for(var r in t)i++,$.ajax({url:t[r],complete:function(t){return function(r){i--,n[t]=JSON.parse(r.responseText),0===i&&e.call(s,n)}}(r)})},start:function(t){var e=this;this.buildings=t.buildings,this.domSearchTextInput=this.domId("searchText"),this.domSearchResults=this.domId("searchResults"),this.stateSet("waiting");var i=this.searchEvent.bind(this);this.listen("searchForm","submit",function(t){e.scrollToSearch(),i(t)}),this.listen("searchText","keyup",i)},stateSet:function(t){if(this.stateCurrent!==t){var e=t.charAt(0).toUpperCase()+t.slice(1);if(this.stateCurrent){var i=this.stateCurrent.charAt(0).toUpperCase()+this.stateCurrent.slice(1);this["state"+i+"Exit"](),this.stateCurrent=null}this["state"+e+"Init"]()!==!1&&(this.stateCurrent=t)}},stateWaitingInit:function(){},stateWaitingExit:function(){},stateSearchInit:function(){if(!this.domSearchTextInput.value)return this.stateSet("waiting"),!1},stateSearchExit:function(){},scrollToSearch:function(){this.$window.scrollTo("#searchTabs",{duration:1e3,easing:"easeOutQuad"})},searchEvent:function(t){t&&t.preventDefault();var e=this.domSearchTextInput.value;this.search(e,{building:this.buildingSelected})},search:function(t){var e=this;arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.stateSet("search"),this.domSearchResults.innerHTML="",$.ajax({url:"webservice/search?t="+encodeURIComponent(t),dataType:"json",complete:function(t){e.renderSearchResult(t.responseJSON)}})},renderSearchResult:function(t){var e=!0,i=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){var a=s.value,o=document.createElement("gv-results-item");o.title=a.title,o.description=a.description,o.uri=a.uri,this.domSearchResults.appendChild(o)}}catch(t){i=!0,n=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw n}}},listen:function(t,e,i){if(!Array.isArray(e))return this.domId(t).addEventListener(e,i);for(var n in e)this.listen(t,e[n],i)},domId:function(t){return document.getElementById(t)},dom:function(t){return document.querySelectorAll(t)}});
//# sourceMappingURL=gv-carto.min.js.map
