"use strict";function onMapClick(e){log("onMapClick"),semapps.map.OSM.scrollWheelZoom.enabled()?semapps.map.OSM.scrollWheelZoom.disable():semapps.map.OSM.scrollWheelZoom.enable(),mouseOver()}function mouseOver(e){log("mouseOver");var i=document.getElementById("semapps-map-black");semapps.map.OSM.scrollWheelZoom.enabled()?($("#semapps-map-black").animate({height:"0px"},"fast","linear"),$("#semapps-map-message").hide()):($("#semapps-map-black").animate({height:"100%"},"fast","linear"),i.style.display="block",$("#semapps-map-message").show())}function mouseOut(e){log("mouseOut"),$("#semapps-map-message").hide(),$("#semapps-map-black").animate({height:"0px"},"fast","linear")}function getDetail(e){semapps.goToPath("detail",{uri:window.encodeURIComponent(e.rel)})}Polymer({is:"semapps-map",properties:{route:{type:Object,observer:"_routeChanged"},pins:{type:Array,value:[]}},attached:function(){this.ready=!1,semapps.map=this,SemAppsCarto.ready(this.start.bind(this))},start:function(){this.globalX=48.862725,this.globalY=2.287592000000018,this.globalZoom=6;var e=semapps.isAnonymous()?12:18;this.OSM=L.map("semapps",{maxZoom:e,minZoom:0}).setView([this.globalX,this.globalY],this.globalZoom),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.OSM),this.markers=L.markerClusterGroup(),this.OSM.addLayer(this.markers),this.OSM.scrollWheelZoom.disable(),this.OSM.off("dblclick"),this.OSM.on("dblclick",onMapClick),this.OSM.on("mouseover",mouseOver),this.OSM.on("mouseout",mouseOut),this.pinAvailaible=[],this.awesome={"http://virtual-assembly.org/pair#Person":L.AwesomeMarkers.icon({icon:"user",markerColor:"blue"}),"http://virtual-assembly.org/pair#Organization":L.AwesomeMarkers.icon({icon:"tower",markerColor:"blue"}),"http://virtual-assembly.org/pair#Project":L.AwesomeMarkers.icon({icon:"screenshot",markerColor:"red"}),"http://virtual-assembly.org/pair#Event":L.AwesomeMarkers.icon({icon:"calendar",markerColor:"orange"}),"http://virtual-assembly.org/pair#Proposal":L.AwesomeMarkers.icon({icon:"info-sign",markerColor:"green"}),"http://virtual-assembly.org/pair#Document":L.AwesomeMarkers.icon({icon:"folder-open",markerColor:"black"})}},pinShowAll:function(){for(var e in this.pins)this.pins.hasOwnProperty(e)&&this.pinShow(e)},pinShow:function(e){this.pins.hasOwnProperty(e)&&this.pinAvailaible[e]?(this.markers.addLayer(this.pins[e]),this.pinAvailaible[e]=!1):(log("error: "+e+" is not a marker"),log(this.pins))},addPin:function(e,i,s,o,a){this.pinAvailaible[s]=!0,void 0!==this.awesome[a]?this.pins[s]=L.marker([e,i],{icon:this.awesome[a]}).bindPopup('<a href="#" onclick="getDetail(this)" rel="'+s+'"><h5>'+o+"</h5> </a>"):this.pins[s]=L.marker([e,i]).bindPopup('<a href="#" onclick="getDetail(this)" rel="'+s+'"><h5>'+o+" </h5></a>"),this.pinShow(s)},pinShowOne:function(e){this.pinHideAll(),this.pinShow(e),this.OSM.setView(this.pins[e].getLatLng(),15,{animate:!0})},pinHide:function(e){if(void 0!==this.pins[e]&&!this.pinAvailaible[e]){var i=this.pins[e];this.markers.removeLayer(i),this.pinAvailaible[e]=!0}},pinHideAll:function(){log("start pinHideAll"),log(this.pins);for(var e in this.pins)this.pins.hasOwnProperty(e)&&this.pinHide(e);log("stop pinHideAll")},zoomGlobal:function(){this.OSM.setView([this.globalX,this.globalY],this.globalZoom)},handleClick:function(e){e.preventDefault(),semapps.scrollToContent(),semapps.myRoute="detail",semapps.goToPath("detail",{uri:window.encodeURIComponent(this.uri)})}});
//# sourceMappingURL=semapps-map.min.js.map
