{"version":3,"sources":["web/front/src/semapps-map/semapps-map.js"],"names":["Polymer","is","properties","route","type","Object","observer","pins","Array","value","attached","this","ready","semapps","map","SemAppsCarto","start","bind","OSM","L","setView","tileLayer","attribution","addTo","pinShow","latitude","longitude","uri","text","marker","bindPopup","pinShowOne","pinHideAll","pinHide","undefined","removeLayer","log","hasOwnProperty"],"mappings":"YAAAA,UACEC,GAAI,cAEJC,YACEC,OACEC,KAAMC,OACNC,SAAU,iBAEZC,MACEH,KAAMI,MACNC,WAKJC,SAfM,WAgBJC,KAAKC,OAAQ,EAEbC,QAAQC,IAAMH,KAGdI,aAAaH,MAAMD,KAAKK,MAAMC,KAAKN,QAGrCK,MAxBM,WA0BFL,KAAKO,IAAMC,EAAEL,IAAI,WAAWM,SAAS,UAAW,kBAAmB,IACnED,EAAEE,UAAU,sDACRC,YAAa,8EACdC,MAAMZ,KAAKO,MAIhBM,QAjCI,SAiCIC,EAASC,EAAWC,EAAKC,GAE7B,GAAIC,GAASV,EAAEU,QAAQJ,EAASC,IAC3BI,UAAUF,EACfC,GAAON,MAAMZ,KAAKO,KAClBP,KAAKJ,KAAKoB,GAAOE,GAGrBE,WAzCI,SAyCON,EAASC,EAAWC,EAAKC,GAEhCjB,KAAKqB,aACLrB,KAAKa,QAAQC,EAASC,EAAWC,EAAKC,IAG1CK,QA/CI,SA+CIN,GAEJ,OAAsBO,KAAnBvB,KAAKJ,KAAKoB,GAAmB,CAC5B,GAAIE,GAASlB,KAAKJ,KAAKoB,EACvBhB,MAAKO,IAAIiB,YAAYN,KAI7BG,WAvDI,WAyDA,IAAK,GAAIL,KAAOhB,MAAKJ,KACjB6B,IAAIT,GACAhB,KAAKJ,KAAK8B,eAAeV,IACzBhB,KAAKsB,QAAQN","file":"semapps-map.min.js","sourcesContent":["Polymer({\r\n  is: 'semapps-map',\r\n\r\n  properties: {\r\n    route: {\r\n      type: Object,\r\n      observer: '_routeChanged'\r\n    },\r\n    pins: {\r\n      type: Array,\r\n      value: []\r\n    },\r\n  },\r\n\r\n  // Wait all HTML to be loaded.\r\n  attached() {\r\n    this.ready = false;\r\n    // Global ref.\r\n    semapps.map = this;\r\n\r\n    // Wait for buildings to be loaded.\r\n    SemAppsCarto.ready(this.start.bind(this));\r\n  },\r\n\r\n  start() {\r\n    \"use strict\";\r\n      this.OSM = L.map('semapps').setView([42.403681, 2.47986190000006], 13);\r\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n          attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\r\n      }).addTo(this.OSM );\r\n\r\n  },\r\n\r\n    pinShow(latitude,longitude, uri, text) {\r\n        \"use strict\";\r\n        let marker = L.marker([latitude,longitude])\r\n            .bindPopup(text);\r\n        marker.addTo(this.OSM);\r\n        this.pins[uri] = marker;\r\n    },\r\n\r\n    pinShowOne(latitude,longitude, uri, text) {\r\n        \"use strict\";\r\n        this.pinHideAll();\r\n        this.pinShow(latitude,longitude, uri, text);\r\n    },\r\n\r\n    pinHide(uri) {\r\n        \"use strict\";\r\n        if(this.pins[uri] !== undefined){\r\n            let marker = this.pins[uri];\r\n            this.OSM.removeLayer(marker);\r\n        }\r\n    },\r\n\r\n    pinHideAll() {\r\n        \"use strict\";\r\n        for (let uri in this.pins){\r\n            log(uri);\r\n            if (this.pins.hasOwnProperty(uri)) {\r\n                this.pinHide(uri);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n});\r\n"]}