{"version":3,"sources":["web/front/src/semapps-map/semapps-map.js"],"names":["Polymer","is","properties","route","type","Object","observer","pins","Array","value","attached","this","ready","semapps","map","SemAppsCarto","start","bind","OSM","L","setView","tileLayer","attribution","addTo","markers","markerClusterGroup","addLayer","pinShow","latitude","longitude","uri","text","marker","bindPopup","pinShowOne","pinHideAll","pinHide","undefined","removeLayer","hasOwnProperty"],"mappings":"YAAAA,UACEC,GAAI,cAEJC,YACEC,OACEC,KAAMC,OACNC,SAAU,iBAEZC,MACEH,KAAMI,MACNC,WAKJC,SAfM,WAgBJC,KAAKC,OAAQ,EAEbC,QAAQC,IAAMH,KAGdI,aAAaH,MAAMD,KAAKK,MAAMC,KAAKN,QAGrCK,MAxBM,WA0BFL,KAAKO,IAAMC,EAAEL,IAAI,WAAWM,SAAS,UAAW,mBAAoB,GACpED,EAAEE,UAAU,sDACRC,YAAa,8EACdC,MAAMZ,KAAKO,KACdP,KAAKa,QAAUL,EAAEM,qBACjBd,KAAKO,IAAIQ,SAASf,KAAKa,UAGzBG,QAlCI,SAkCIC,EAASC,EAAWC,EAAKC,GAE7B,GAAIC,GAASb,EAAEa,QAAQJ,EAASC,IAC3BI,UAAUF,EAEfpB,MAAKa,QAAQE,SAASM,GACtBrB,KAAKJ,KAAKuB,GAAOE,GAGrBE,WA3CI,SA2CON,EAASC,EAAWC,EAAKC,GAEhCpB,KAAKwB,aACLxB,KAAKgB,QAAQC,EAASC,EAAWC,EAAKC,IAG1CK,QAjDI,SAiDIN,GAEJ,OAAsBO,KAAnB1B,KAAKJ,KAAKuB,GAAmB,CAC5B,GAAIE,GAASrB,KAAKJ,KAAKuB,EACvBnB,MAAKO,IAAIoB,YAAYN,KAI7BG,WAzDI,WA2DA,IAAK,GAAIL,KAAOnB,MAAKJ,KACbI,KAAKJ,KAAKgC,eAAeT,IACzBnB,KAAKyB,QAAQN","file":"semapps-map.min.js","sourcesContent":["Polymer({\r\n  is: 'semapps-map',\r\n\r\n  properties: {\r\n    route: {\r\n      type: Object,\r\n      observer: '_routeChanged'\r\n    },\r\n    pins: {\r\n      type: Array,\r\n      value: []\r\n    },\r\n  },\r\n\r\n  // Wait all HTML to be loaded.\r\n  attached() {\r\n    this.ready = false;\r\n    // Global ref.\r\n    semapps.map = this;\r\n\r\n    // Wait for buildings to be loaded.\r\n    SemAppsCarto.ready(this.start.bind(this));\r\n  },\r\n\r\n  start() {\r\n    \"use strict\";\r\n      this.OSM = L.map('semapps').setView([48.862725, 2.287592000000018], 6);\r\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n          attribution: '&copy; <a href=\"http://www.openstreetmap.org/copyright\">OpenStreetMap</a>'\r\n      }).addTo(this.OSM );\r\n      this.markers = L.markerClusterGroup();\r\n      this.OSM.addLayer(this.markers) ;\r\n  },\r\n\r\n    pinShow(latitude,longitude, uri, text) {\r\n        \"use strict\";\r\n        let marker = L.marker([latitude,longitude])\r\n            .bindPopup(text);\r\n        //marker.addTo(this.OSM);\r\n        this.markers.addLayer(marker);\r\n        this.pins[uri] = marker;\r\n    },\r\n\r\n    pinShowOne(latitude,longitude, uri, text) {\r\n        \"use strict\";\r\n        this.pinHideAll();\r\n        this.pinShow(latitude,longitude, uri, text);\r\n    },\r\n\r\n    pinHide(uri) {\r\n        \"use strict\";\r\n        if(this.pins[uri] !== undefined){\r\n            let marker = this.pins[uri];\r\n            this.OSM.removeLayer(marker);\r\n        }\r\n    },\r\n\r\n    pinHideAll() {\r\n        \"use strict\";\r\n        for (let uri in this.pins){\r\n            if (this.pins.hasOwnProperty(uri)) {\r\n                this.pinHide(uri);\r\n            }\r\n        }\r\n    }\r\n});\r\n"]}