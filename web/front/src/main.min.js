"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();!function(){window.log=function(e){console.debug(e)};var e=[],t=function(){function e(t){_classCallCheck(this,e),$.extend(!0,this,{formFields:{},fieldsAliases:{"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"rdfType"}},t)}return _createClass(e,[{key:"getValue",value:function(e,t){if(t=this.fieldsAliases[t]||t,e[t]){var i="array"==typeof e[t]?e[t]:e[t][0];return i.value}return""}}]),e}();window.GVCarto=function(){function i(e){var n=this;_classCallCheck(this,i),window.gvc=this,this.baseUrl="/",this.mainComponent=e,this.firstSearch=!0,this.$window=$(window),this.buildingSelectedAll="partout",this.buildingSelected=this.buildingSelectedAll,this.sfClient=new t({fieldsAliases:{"http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#status":"gvStatus","http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#realisedContribution":"realisedContribution","http://xmlns.com/foaf/0.1/status":"foafStatus","http://xmlns.com/foaf/0.1/name":"foafName","http://vocab.sindice.net/csv/rowPosition":"rowPosition","urn:gv/contactsPrint":"contactsPrint","http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#conventionType":"conventionType","http://virtual-assembly.org/pair_v2#hasResponsible":"hasResponsible","urn:displayLabel":"displayLabel","http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#administrativeName":"administrativeName","http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#building":"building","http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#proposedContribution":"proposedContribution","http://purl.org/dc/elements/1.1/subject":"subject","http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#arrivalDate":"arrivalDate","http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#room":"room"}}),this.$gvMap=$(document.getElementById("gv-map")),this.searchTypes={"http://xmlns.com/foaf/0.1/Person":{label:"Personne",type:"person"},"http://xmlns.com/foaf/0.1/Organization":{label:"Organisation",type:"organization"}},"127.0.0.1"===window.location.hostname&&window.document.body.classList.add("dev-env");var s=function e(){n.ajax("webservice/parameters",function(t){t&&t.responseJSON&&t.responseJSON.no_internet?(n.baseUrl="/fake_service/",e()):n.start(t.responseJSON)})};s()}return _createClass(i,[{key:"ajax",value:function(e,t){$.ajax({url:this.baseUrl+e,complete:t})}},{key:"ajaxMultiple",value:function(e,t){var i=0,n={},s=this;for(var a in e)i++,this.ajax(e[a],function(e){return function(a){i--,n[e]=JSON.parse(a.responseText),0===i&&t.call(s,n)}}(a))}},{key:"start",value:function(t){this.buildings=t.buildings,this.entities=t.entities;for(var i in this.buildings)this.buildings[i].key=i;this.domSearchTextInput=this.domId("searchText"),this.isReady=!0;var n=this.mainComponent.get("route.path").split("/"),s=n.length>=2&&("rechercher"===n[1]||""===n[1]);s&&n[3]&&(this.domSearchTextInput.value=n[3]);for(var a in e)e[a]();s&&this.goSearch()}},{key:"goSearch",value:function(){var e=this.domSearchTextInput.value;this.mainComponent.set("route.path","/rechercher/"+(this.buildingSelected||"partout")+"/"+e)}},{key:"scrollToSearchResults",value:function(e){this.$window.scrollTo($("#searchTabs").offset().top-150,{duration:1e3,easing:"easeOutQuad",complete:e})}},{key:"listen",value:function(e,t,i){if(!Array.isArray(t))return this.domId(e).addEventListener(t,i);for(var n in t)this.listen(e,t[n],i)}},{key:"domId",value:function(e){return document.getElementById(e)}},{key:"dom",value:function(e){return document.querySelectorAll(e)}},{key:"goToPath",value:function(e,t){gvc.mainComponent.set("queryParams",t),gvc.mainComponent.set("route.path",e)}},{key:"imageOrFallback",value:function(e,t){return e?e:"/common/images/result-no_picture-"+gvc.searchTypes[t].type+".png"}}]),i}(),window.GVCarto.ready=function(t){window.gvc&&window.gvc.isReady?t():e.push(t)}}();
//# sourceMappingURL=main.min.js.map
