"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}();!function(){window.log=function(t){console.log(t)};var t=[],e=function(){function t(e){_classCallCheck(this,t),$.extend(!0,this,{formFields:{},fieldsAliases:{"http://www.w3.org/1999/02/22-rdf-syntax-ns#type":"rdfType"}},e)}return _createClass(t,[{key:"getValue",value:function(t,e){if(e=this.fieldsAliases[e]||e,t[e]){var i="array"==typeof t[e]?t[e]:t[e][0];return i.value}return""}}]),t}();window.GVCarto=function(){function i(t){_classCallCheck(this,i),window.gvc=this,this.mainComponent=t,this.firstSearch=!0,this.$window=$(window),this.buildingSelectedAll="partout",this.buildingSelected=this.buildingSelectedAll,this.sfClient=new e({fieldsAliases:{"http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#status":"gvStatus","http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#realisedContribution":"realisedContribution","http://xmlns.com/foaf/0.1/status":"foafStatus","http://xmlns.com/foaf/0.1/name":"foafName","http://vocab.sindice.net/csv/rowPosition":"rowPosition","urn:gv/contactsPrint":"contactsPrint","http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#conventionType":"conventionType","http://virtual-assembly.org/pair_v2#hasResponsible":"hasResponsible","urn:displayLabel":"displayLabel","http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#administrativeName":"administrativeName","http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#building":"building","http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#proposedContribution":"proposedContribution","http://purl.org/dc/elements/1.1/subject":"subject","http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#arrivalDate":"arrivalDate","http://assemblee-virtuelle.github.io/grands-voisins-v2/gv.owl.ttl#room":"room"}}),this.$gvMap=$(document.getElementById("gv-map")),this.searchTypes={"http://xmlns.com/foaf/0.1/Person":"Personne","http://xmlns.com/foaf/0.1/Organization":"Organisation"},"127.0.0.1"===window.location.hostname&&window.document.body.classList.add("dev-env"),this.ajaxMultiple({parameters:"/webservice/parameters"},this.start)}return _createClass(i,[{key:"ajaxMultiple",value:function(t,e){var i=0,s={},n=this;for(var a in t)i++,$.ajax({url:t[a],complete:function(t){return function(a){i--,s[t]=JSON.parse(a.responseText),0===i&&e.call(n,s)}}(a)})}},{key:"start",value:function(e){this.buildings=e.parameters.buildings,this.entities=e.parameters.entities;for(var i in this.buildings)this.buildings[i].key=i;this.domSearchTextInput=this.domId("searchText"),this.stateSet("waiting"),this.isReady=!0;for(var s in t)t[s]()}},{key:"stateSet",value:function(t){if(this.stateCurrent!==t){var e=t.charAt(0).toUpperCase()+t.slice(1);if(this.stateCurrent){var i=this.stateCurrent.charAt(0).toUpperCase()+this.stateCurrent.slice(1);this["state"+i+"Exit"](),this.stateCurrent=null}this["state"+e+"Init"]()!==!1&&(this.stateCurrent=t)}}},{key:"stateWaitingInit",value:function(){}},{key:"stateWaitingExit",value:function(){}},{key:"goSearch",value:function(){var t=this.domSearchTextInput.value;this.mainComponent.set("route.path","/rechercher/"+(this.buildingSelected||"partout")+"/"+t)}},{key:"scrollToSearchResults",value:function(t){this.$window.scrollTo($("#searchTabs").offset().top-150,{duration:1e3,easing:"easeOutQuad",complete:t})}},{key:"listen",value:function(t,e,i){if(!Array.isArray(e))return this.domId(t).addEventListener(e,i);for(var s in e)this.listen(t,e[s],i)}},{key:"domId",value:function(t){return document.getElementById(t)}},{key:"dom",value:function(t){return document.querySelectorAll(t)}},{key:"goToPath",value:function(t,e){gvc.mainComponent.set("queryParams",e),gvc.mainComponent.set("route.path",t)}}]),i}(),window.GVCarto.ready=function(e){window.gvc&&window.gvc.isReady?e():t.push(e)}}();
//# sourceMappingURL=main.min.js.map
