"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();!function(){window.log=function(e){console.debug(e)};var e=[];window.GVCarto=function(){function t(e){var n=this;_classCallCheck(this,t),log(e),window.gvc=this,this.baseUrl="/",this.myRoute="detail",this.mainComponent=e,this.firstSearch=!0,this.$window=$(window),this.buildingSelectedAll="partout",this.buildingSelected=this.buildingSelectedAll,this.$gvMap=$(document.getElementById("mm-map")),this.searchTypes={"http://assemblee-virtuelle.github.io/mmmfest/PAIR_temp.owl#Person":{label:"Personne",type:"person",plural:"Personnes"},"http://assemblee-virtuelle.github.io/mmmfest/PAIR_temp.owl#Organization":{label:"Organisation",type:"organization",plural:"Organisations"},"http://assemblee-virtuelle.github.io/mmmfest/PAIR_temp.owl#Project":{label:"Projet",type:"projet",plural:"Projets"},"http://assemblee-virtuelle.github.io/mmmfest/PAIR_temp.owl#Event":{label:"Evénement",type:"event",plural:"Evénements"},"http://assemblee-virtuelle.github.io/mmmfest/PAIR_temp.owl#Proposal":{label:"Proposition",type:"proposition",plural:"Propositions"}},cookie.get("introAnimation")?window.document.body.classList.add("skip-intro"):cookie.set("introAnimation",!0,{expires:1});!function e(){n.ajax("webservice/parameters",function(t){t&&t.responseJSON&&t.responseJSON.no_internet?(n.baseUrl="/fake_service/",e()):n.start(t.responseJSON)})}()}return _createClass(t,[{key:"ajax",value:function(e,t){$.ajax({url:this.baseUrl+e,complete:t})}},{key:"ajaxMultiple",value:function(e,t){var n=0,i={},s=this;for(var o in e)n++,this.ajax(e[o],function(e){return function(o){n--,i[e]=JSON.parse(o.responseText),0===n&&t.call(s,i)}}(o))}},{key:"start",value:function(t){$.extend(this,t);for(var n in this.buildings)this.buildings[n].key=n;this.domSearchTextInput=this.domId("searchText"),this.isReady=!0;var i=this.mainComponent.get("route.path").split("/"),s=i.length>=2&&("rechercher"===i[1]||""===i[1]);s&&i[3]&&(this.domSearchTextInput.value=i[3]);for(var o in e)e[o]();s&&this.goSearch()}},{key:"goSearch",value:function(){var e=this.domSearchTextInput.value,t=this.buildingSelected||"partout",n="/rechercher/"+t+"/"+e;document.location.pathname===n?this.results.search(e,t):this.goToPath(n)}},{key:"scrollToContent",value:function(e){this.$window.scrollTo($("#pageContent").offset().top-150,{duration:1e3,easing:"easeOutQuad",complete:e})}},{key:"listen",value:function(e,t,n){if(!Array.isArray(t))return this.domId(e).addEventListener(t,n);for(var i in t)this.listen(e,t[i],n)}},{key:"domId",value:function(e){return document.getElementById(e)}},{key:"dom",value:function(e){return document.querySelectorAll(e)}},{key:"goToPath",value:function(e,t){this.myRoute=e,gvc.mainComponent.set("queryParams",t),gvc.mainComponent.set("route.path",e)}},{key:"imageOrFallback",value:function(e,t){return e||"/common/images/result-no_picture-"+gvc.searchTypes[t].type+".png"}},{key:"haveName",value:function(){return""!==this.name}},{key:"isSuperAdmin",value:function(){return"super_admin"===this.access}},{key:"isAdmin",value:function(){return"admin"===this.access||this.isSuperAdmin()}},{key:"isMember",value:function(){return"super_admin"===this.access||this.isAdmin()}},{key:"isAnonymous",value:function(){return!this.isMember()}},{key:"initElementGlobals",value:function(e){$.extend(e,{isAnonymous:this.isAnonymous(),isMember:this.isMember(),isAdmin:this.isAdmin(),isSuperAdmin:this.isSuperAdmin(),haveName:this.haveName()})}},{key:"realLink",value:function(e){e.preventDefault(),window.location.replace(e.currentTarget.getAttribute("href"))}}]),t}(),window.GVCarto.ready=function(t){window.gvc&&window.gvc.isReady?t():e.push(t)}}();
//# sourceMappingURL=main.min.js.map
